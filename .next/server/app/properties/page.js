(()=>{var e={};e.id=664,e.ids=[664],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4770:e=>{"use strict";e.exports=require("crypto")},665:e=>{"use strict";e.exports=require("dns")},7702:e=>{"use strict";e.exports=require("events")},2048:e=>{"use strict";e.exports=require("fs")},2615:e=>{"use strict";e.exports=require("http")},2694:e=>{"use strict";e.exports=require("http2")},8216:e=>{"use strict";e.exports=require("net")},9801:e=>{"use strict";e.exports=require("os")},5315:e=>{"use strict";e.exports=require("path")},5816:e=>{"use strict";e.exports=require("process")},6162:e=>{"use strict";e.exports=require("stream")},4026:e=>{"use strict";e.exports=require("string_decoder")},2452:e=>{"use strict";e.exports=require("tls")},7360:e=>{"use strict";e.exports=require("url")},153:e=>{"use strict";e.exports=require("util")},1568:e=>{"use strict";e.exports=require("zlib")},8061:e=>{"use strict";e.exports=require("node:assert")},2761:e=>{"use strict";e.exports=require("node:async_hooks")},2254:e=>{"use strict";e.exports=require("node:buffer")},27:e=>{"use strict";e.exports=require("node:console")},6005:e=>{"use strict";e.exports=require("node:crypto")},2110:e=>{"use strict";e.exports=require("node:diagnostics_channel")},5673:e=>{"use strict";e.exports=require("node:events")},8849:e=>{"use strict";e.exports=require("node:http")},2725:e=>{"use strict";e.exports=require("node:http2")},7503:e=>{"use strict";e.exports=require("node:net")},8846:e=>{"use strict";e.exports=require("node:perf_hooks")},5815:e=>{"use strict";e.exports=require("node:querystring")},4492:e=>{"use strict";e.exports=require("node:stream")},1764:e=>{"use strict";e.exports=require("node:tls")},1041:e=>{"use strict";e.exports=require("node:url")},7261:e=>{"use strict";e.exports=require("node:util")},3746:e=>{"use strict";e.exports=require("node:util/types")},4086:e=>{"use strict";e.exports=require("node:worker_threads")},5628:e=>{"use strict";e.exports=require("node:zlib")},1962:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>l.a,__next_app__:()=>u,originalPathname:()=>m,pages:()=>d,routeModule:()=>x,tree:()=>c}),t(7587),t(1506),t(6560);var r=t(3191),a=t(8716),i=t(7922),l=t.n(i),o=t(5231),n={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>o[e]);t.d(s,n);let c=["",{children:["properties",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,7587)),"C:\\NB\\showAI_V3\\app\\properties\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,1506)),"C:\\NB\\showAI_V3\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.bind(t,6560)),"C:\\NB\\showAI_V3\\app\\not-found.tsx"]}],d=["C:\\NB\\showAI_V3\\app\\properties\\page.tsx"],m="/properties/page",u={require:t,loadChunk:()=>Promise.resolve()},x=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/properties/page",pathname:"/properties",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},7412:(e,s,t)=>{Promise.resolve().then(t.bind(t,3003))},3003:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>N});var r=t(326),a=t(7577),i=t(76),l=t(902),o=t(464),n=t(4036),c=t(709),d=t(7553),m=t(1552),u=t(4321);let x=["Single Family","Condo","Townhouse","Multi-Family","Other"],p=["Active","Coming Soon","Sold"],h=["Ensuite","Large Backyard","Fireplace","In-unit Laundry","Walk-in Closet","Balcony/Patio","Hardwood Floors","Stainless Steel Appliances","Central Air","Swimming Pool","Home Office","Updated Kitchen","Master Suite","Fenced Yard"];function g({onSubmit:e,onCancel:s,loading:t,isEditing:i=!1,initialData:n}){let[c,d]=(0,a.useState)({address:n?.address||"",addressLine1:n?.addressLine1||"",city:n?.city||"",state:n?.state||"",postalCode:n?.postalCode||"",price:n?.price?.toString()||"",bedrooms:n?.bedrooms?.toString()||"3",bathrooms:n?.bathrooms?.toString()||"2",sqft:n?.sqft?.toString()||"",description:n?.description||"",propertyType:n?.propertyType||"Single Family",lotSize:n?.lotSize?.toString()||"",yearBuilt:n?.yearBuilt?.toString()||"",parking:n?.parking||"",mlsNumber:n?.mlsNumber||"",status:n?.status||"Active"}),[g,y]=(0,a.useState)(()=>n?.propertyFeatures?n.propertyFeatures.filter(e=>h.includes(e)):[]),[b,f]=(0,a.useState)(()=>n?.propertyFeatures?n.propertyFeatures.filter(e=>!h.includes(e)):[]),[j,N]=(0,a.useState)([]),[v,w]=(0,a.useState)(n?.images||[]),[S,C]=(0,a.useState)(!1),{user:k}=(0,o.a)(),q=async s=>{s.preventDefault(),console.log("=== ENHANCED PROPERTY FORM SUBMISSION DEBUG ==="),console.log("Raw form data:",c),console.log("Selected features:",g),console.log("Image files:",j.length);let t=c.addressLine1.trim().length>0,r=c.city.trim().length>0,a=c.state.trim().length>0,o=c.postalCode.trim().length>0,n=c.price&&!isNaN(parseInt(c.price)),d=c.sqft&&!isNaN(parseInt(c.sqft)),u=c.propertyType.length>0,x=c.status.length>0;if(console.log("Enhanced form validation:",{addressLine1:{value:c.addressLine1,isValid:t},city:{value:c.city,isValid:r},state:{value:c.state,isValid:a},postalCode:{value:c.postalCode,isValid:o},price:{value:c.price,isValid:n},sqft:{value:c.sqft,isValid:d},propertyType:{value:c.propertyType,isValid:u},status:{value:c.status,isValid:x},bedrooms:{value:c.bedrooms,parsed:parseInt(c.bedrooms)},bathrooms:{value:c.bathrooms,parsed:parseFloat(c.bathrooms)}}),!t||!r||!a||!o||!n||!d||!u||!x){alert("Please fill in all required fields with valid values.");return}C(!0);let p=[];try{if(j.length>0&&k?.uid){console.log("\uD83D\uDDBC️ Uploading",j.length,"images to Firebase Storage");let e=j.map(async(e,s)=>{let t=`property-${Date.now()}-${s}.${e.name.split(".").pop()}`,r=(0,m.iH)(l.tO,`properties/${k.uid}/${t}`);await (0,m.KV)(r,e);let a=await (0,m.Jt)(r);return console.log("✅ Image uploaded:",t),a});p=await Promise.all(e),console.log("✅ All images uploaded successfully")}let s={address:`${c.addressLine1.trim()}, ${c.city.trim()}, ${c.state.trim()} ${c.postalCode.trim()}`,addressLine1:c.addressLine1.trim(),city:c.city.trim(),state:c.state.trim().toUpperCase(),postalCode:c.postalCode.trim(),price:parseInt(c.price),bedrooms:parseInt(c.bedrooms),bathrooms:parseFloat(c.bathrooms),sqft:parseInt(c.sqft),description:c.description.trim(),propertyType:c.propertyType,lotSize:c.lotSize?parseInt(c.lotSize):void 0,yearBuilt:c.yearBuilt?parseInt(c.yearBuilt):void 0,parking:c.parking.trim()||void 0,propertyFeatures:[...g,...b],mlsNumber:c.mlsNumber.trim()||void 0,status:c.status,images:i?[...v,...p]:p};console.log("Enhanced processed data being sent to onSubmit:",s),console.log("=== END ENHANCED FORM DEBUG ==="),e(s)}catch(e){console.error("❌ Error uploading images:",e),alert("Failed to upload images. Please try again.")}finally{C(!1)}},P=e=>{d({...c,[e.target.name]:e.target.value})},E=e=>{y(s=>s.includes(e)?s.filter(s=>s!==e):[...s,e])},D=e=>{N(s=>s.filter((s,t)=>t!==e)),w(s=>s.filter((s,t)=>t!==e))},F=new Date().getFullYear();return r.jsx("div",{className:"flex flex-col h-full",children:(0,r.jsxs)("form",{onSubmit:q,className:"flex flex-col h-full",children:[r.jsx("div",{className:"mobile-scroll overflow-y-auto flex-1 px-4 pb-24 safe-bottom",children:(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-lg font-medium text-white border-b border-gray-700 pb-2",children:"Basic Information"}),(0,r.jsxs)("div",{children:[r.jsx("label",{htmlFor:"addressLine1",className:"block text-sm font-medium text-gray-300 mb-2",children:"Street Address *"}),r.jsx("input",{type:"text",id:"addressLine1",name:"addressLine1",value:c.addressLine1,onChange:P,className:"w-full px-4 py-3 border border-gray-700 rounded-lg bg-gray-900 text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",placeholder:"123 Main Street",required:!0})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[(0,r.jsxs)("div",{className:"flex flex-col",children:[r.jsx("label",{htmlFor:"city",className:"text-sm font-medium text-gray-300 mb-2",children:"City *"}),r.jsx("input",{type:"text",id:"city",name:"city",value:c.city,onChange:P,className:"w-full px-4 py-3 border border-gray-700 rounded-lg bg-gray-900 text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",placeholder:"Windsor",required:!0})]}),(0,r.jsxs)("div",{className:"flex flex-col",children:[r.jsx("label",{htmlFor:"state",className:"text-sm font-medium text-gray-300 mb-2",children:"State / Province *"}),r.jsx("input",{type:"text",id:"state",name:"state",value:c.state,onChange:P,className:"w-full px-4 py-3 border border-gray-700 rounded-lg bg-gray-900 text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",placeholder:"ON",required:!0})]}),(0,r.jsxs)("div",{className:"flex flex-col",children:[r.jsx("label",{htmlFor:"postalCode",className:"text-sm font-medium text-gray-300 mb-2",children:"Postal Code *"}),r.jsx("input",{type:"text",id:"postalCode",name:"postalCode",value:c.postalCode,onChange:P,className:"w-full px-4 py-3 border border-gray-700 rounded-lg bg-gray-900 text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",placeholder:"N9B 3P4",required:!0})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{htmlFor:"propertyType",className:"block text-sm font-medium text-gray-300 mb-2",children:"Property Type *"}),r.jsx("select",{id:"propertyType",name:"propertyType",value:c.propertyType,onChange:P,className:"w-full px-4 py-3 pr-8 border border-gray-700 rounded-lg bg-gray-900 text-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",required:!0,children:x.map(e=>r.jsx("option",{value:e,children:e},e))})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{htmlFor:"status",className:"block text-sm font-medium text-gray-300 mb-2",children:"Status *"}),r.jsx("select",{id:"status",name:"status",value:c.status,onChange:P,className:"w-full px-4 py-3 pr-8 border border-gray-700 rounded-lg bg-gray-900 text-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",required:!0,children:p.map(e=>r.jsx("option",{value:e,children:e},e))})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{htmlFor:"price",className:"block text-sm font-medium text-gray-300 mb-2",children:"Price *"}),r.jsx("input",{type:"number",id:"price",name:"price",value:c.price,onChange:P,className:"w-full px-4 py-3 border border-gray-700 rounded-lg bg-gray-900 text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",placeholder:"450000",required:!0})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{htmlFor:"sqft",className:"block text-sm font-medium text-gray-300 mb-2",children:"Square Feet *"}),r.jsx("input",{type:"number",id:"sqft",name:"sqft",value:c.sqft,onChange:P,className:"w-full px-4 py-3 border border-gray-700 rounded-lg bg-gray-900 text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",placeholder:"2500",required:!0})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{htmlFor:"bedrooms",className:"block text-sm font-medium text-gray-300 mb-2",children:"Bedrooms *"}),r.jsx("select",{id:"bedrooms",name:"bedrooms",value:c.bedrooms,onChange:P,className:"w-full px-4 py-3 pr-8 border border-gray-700 rounded-lg bg-gray-900 text-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",children:[1,2,3,4,5,6].map(e=>r.jsx("option",{value:e,children:e},e))})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{htmlFor:"bathrooms",className:"block text-sm font-medium text-gray-300 mb-2",children:"Bathrooms *"}),r.jsx("select",{id:"bathrooms",name:"bathrooms",value:c.bathrooms,onChange:P,className:"w-full px-4 py-3 pr-8 border border-gray-700 rounded-lg bg-gray-900 text-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",children:[1,1.5,2,2.5,3,3.5,4,4.5,5].map(e=>r.jsx("option",{value:e,children:e},e))})]})]})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-lg font-medium text-white border-b border-gray-700 pb-2",children:"Additional Details"}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{htmlFor:"lotSize",className:"block text-sm font-medium text-gray-300 mb-2",children:"Lot Size (sq ft)"}),r.jsx("input",{type:"number",id:"lotSize",name:"lotSize",value:c.lotSize,onChange:P,className:"w-full px-4 py-3 border border-gray-700 rounded-lg bg-gray-900 text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",placeholder:"7500"})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{htmlFor:"yearBuilt",className:"block text-sm font-medium text-gray-300 mb-2",children:"Year Built"}),r.jsx("input",{type:"number",id:"yearBuilt",name:"yearBuilt",value:c.yearBuilt,onChange:P,min:"1800",max:F,className:"w-full px-4 py-3 border border-gray-700 rounded-lg bg-gray-900 text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",placeholder:F.toString()})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 gap-4",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{htmlFor:"parking",className:"block text-sm font-medium text-gray-300 mb-2",children:"Parking"}),r.jsx("input",{type:"text",id:"parking",name:"parking",value:c.parking,onChange:P,className:"w-full px-4 py-3 border border-gray-700 rounded-lg bg-gray-900 text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",placeholder:"2-car garage, Street parking"})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{htmlFor:"mlsNumber",className:"block text-sm font-medium text-gray-300 mb-2",children:"MLS Number"}),r.jsx("input",{type:"text",id:"mlsNumber",name:"mlsNumber",value:c.mlsNumber,onChange:P,className:"w-full px-4 py-3 border border-gray-700 rounded-lg bg-gray-900 text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",placeholder:"MLS123456"})]})]})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-lg font-medium text-white border-b border-gray-700 pb-2",children:"Property Features"}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Common Features"}),r.jsx("div",{className:"grid grid-cols-2 gap-2",children:h.map(e=>(0,r.jsxs)("label",{className:"flex items-center space-x-2 text-sm text-gray-300 cursor-pointer hover:text-white transition-colors",children:[r.jsx("input",{type:"checkbox",checked:g.includes(e),onChange:()=>E(e),className:"w-4 h-4 bg-gray-800 border-gray-600 rounded focus:ring-blue-500 focus:ring-2"}),r.jsx("span",{children:e})]},e))})]}),r.jsx("div",{children:r.jsx(u.Z,{value:b,onChange:f,placeholder:"Type custom features like: Zen Garden, Soundproof Walls, Smart Home System...",label:"Custom Features"})}),[...g,...b].length>0&&(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"All Features"}),r.jsx("div",{className:"flex flex-wrap gap-1",children:[...g,...b].map((e,s)=>r.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${g.includes(e)?"bg-green-900/30 text-green-300":"bg-blue-900/30 text-blue-300"}`,children:e},s))})]})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-lg font-medium text-white border-b border-gray-700 pb-2",children:"Images"}),(0,r.jsxs)("div",{children:[r.jsx("label",{htmlFor:"images",className:"block text-sm font-medium text-gray-300 mb-2",children:"Property Images (Max 10, 5MB each)"}),r.jsx("input",{type:"file",id:"images",multiple:!0,accept:"image/*",onChange:e=>{let s=Array.from(e.target.files||[]);if(0===s.length)return;if(j.length+s.length>10){alert("Maximum 10 images allowed");return}let t=s.filter(e=>{let s=e.type.startsWith("image/"),t=e.size<=5242880;return s?!!t||(alert(`${e.name} is too large. Maximum size is 5MB`),!1):(alert(`${e.name} is not a valid image file`),!1)});0!==t.length&&(N(e=>[...e,...t]),t.forEach(e=>{let s=new FileReader;s.onload=e=>{w(s=>[...s,e.target?.result])},s.readAsDataURL(e)}))},className:"w-full px-4 py-3 border border-gray-700 rounded-lg bg-gray-900 text-white file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:bg-blue-600 file:text-white file:cursor-pointer hover:file:bg-blue-700 text-sm"})]}),v.length>0&&r.jsx("div",{className:"grid grid-cols-3 gap-2",children:v.map((e,s)=>(0,r.jsxs)("div",{className:"relative group",children:[r.jsx("img",{src:e,alt:`Preview ${s+1}`,className:"w-full h-20 object-cover rounded-lg"}),r.jsx("button",{type:"button",onClick:()=>D(s),className:"absolute -top-2 -right-2 w-6 h-6 bg-red-600 hover:bg-red-700 text-white rounded-full flex items-center justify-center text-xs opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer",children:r.jsx("div",{className:"w-3 h-3 flex items-center justify-center",children:r.jsx("i",{className:"ri-close-line"})})})]},s))})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-300 mb-2",children:"Description"}),r.jsx("textarea",{id:"description",name:"description",value:c.description,onChange:P,rows:3,maxLength:500,className:"w-full px-4 py-3 border border-gray-700 rounded-lg bg-gray-900 text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm resize-none",placeholder:"Optional property description..."}),(0,r.jsxs)("div",{className:"text-right text-xs text-gray-500 mt-1",children:[c.description.length,"/500"]})]})]})}),r.jsx("footer",{className:"sticky bottom-0 left-0 right-0 safe-bottom bg-gray-800/90 backdrop-blur border-t border-gray-700 px-4 py-3",children:(0,r.jsxs)("div",{className:"flex space-x-3",children:[r.jsx("button",{type:"button",onClick:s,className:"flex-1 py-3 px-4 bg-gray-700 hover:bg-gray-600 text-white font-medium rounded-lg transition-colors cursor-pointer whitespace-nowrap",children:"Cancel"}),r.jsx("button",{type:"submit",disabled:t||S||!c.address.trim()||!c.price||!c.sqft,className:"flex-1 py-3 px-4 bg-blue-600 hover:bg-blue-700 disabled:bg-blue-800 text-white font-medium rounded-lg transition-colors cursor-pointer whitespace-nowrap",children:S?"Uploading Images...":t?i?"Saving...":"Adding...":i?"Save Changes":"Add Property"})]})})]})})}function y({statusHistory:e,priceHistory:s,loading:t}){let[i,l]=(0,a.useState)("all"),o=e=>{switch(e){case"Active":return"text-green-400 bg-green-900/30";case"Coming Soon":return"text-yellow-400 bg-yellow-900/30";case"Sold":return"text-red-400 bg-red-900/30";default:return"text-gray-400 bg-gray-900/30"}},n=(e,s)=>{if(!e)return"ri-add-circle-line";let t={"Coming Soon":0,Active:1,Sold:2},r=t[e]||0,a=t[s]||0;return a>r?"ri-arrow-up-circle-line":a<r?"ri-arrow-down-circle-line":"ri-refresh-line"},c=e=>e?(e.toDate?e.toDate():new Date(e)).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"}):"Unknown date",d=e=>`$${e.toLocaleString()}`,m=(e,s)=>void 0===e||void 0===s?"ri-price-tag-3-line":s>e?"ri-arrow-up-line":s<e?"ri-arrow-down-line":"ri-subtract-line",u=(e,s)=>void 0===e||void 0===s?"text-blue-400 bg-blue-900/30":s>e?"text-green-400 bg-green-900/30":s<e?"text-red-400 bg-red-900/30":"text-gray-400 bg-gray-900/30",x=()=>[...e.map(e=>({...e,type:"status",timestamp:e.changedAt})),...s.map(e=>({...e,type:"price",timestamp:e.changedAt}))].sort((e,s)=>{let t=e.timestamp?.toDate?e.timestamp.toDate():new Date(e.timestamp);return(s.timestamp?.toDate?s.timestamp.toDate():new Date(s.timestamp)).getTime()-t.getTime()});if(t)return r.jsx("div",{className:"bg-gray-800 rounded-lg p-6 border border-gray-700",children:(0,r.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[r.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-blue-500"}),r.jsx("h3",{className:"text-lg font-semibold text-white",children:"Loading History..."})]})});let p=(()=>{let e=x();return"status"===i?e.filter(e=>"status"===e.type):"price"===i?e.filter(e=>"price"===e.type):e})();return(0,r.jsxs)("div",{className:"bg-gray-800 rounded-lg border border-gray-700",children:[(0,r.jsxs)("div",{className:"p-4 border-b border-gray-700",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2 mb-3",children:[r.jsx("div",{className:"w-5 h-5 flex items-center justify-center",children:r.jsx("i",{className:"ri-history-line text-blue-500"})}),r.jsx("h3",{className:"text-lg font-semibold text-white",children:"Property History"})]}),(0,r.jsxs)("div",{className:"flex space-x-1 bg-gray-900 rounded-lg p-1",children:[r.jsx("button",{onClick:()=>l("all"),className:`flex-1 px-1 py-1 text-sm font-medium transition-colors cursor-pointer whitespace-nowrap rounded-full ${"all"===i?"bg-blue-600 text-white":"text-gray-400 hover:text-white"}`,children:"All Changes"}),r.jsx("button",{onClick:()=>l("status"),className:`flex-1 px-1 py-1 text-sm font-medium transition-colors cursor-pointer whitespace-nowrap rounded-full ${"status"===i?"bg-blue-600 text-white":"text-gray-400 hover:text-white"}`,children:"Status"}),r.jsx("button",{onClick:()=>l("price"),className:`flex-1 px-1 py-1 text-sm font-medium transition-colors cursor-pointer whitespace-nowrap rounded-full ${"price"===i?"bg-blue-600 text-white":"text-gray-400 hover:text-white"}`,children:"Price"})]})]}),r.jsx("div",{className:"p-4",children:0===p.length?(0,r.jsxs)("div",{className:"text-center py-8",children:[r.jsx("div",{className:"w-16 h-16 mx-auto mb-4 flex items-center justify-center",children:r.jsx("i",{className:"ri-history-line text-4xl text-gray-600"})}),r.jsx("h4",{className:"text-lg font-medium text-gray-400 mb-2",children:"No History Available"}),r.jsx("p",{className:"text-gray-500",children:"Property changes will appear here"})]}):r.jsx("div",{className:"space-y-4",children:p.map((e,s)=>(0,r.jsxs)("div",{className:"relative",children:[s<p.length-1&&r.jsx("div",{className:"absolute left-6 top-12 w-0.5 h-12 bg-gray-700"}),(0,r.jsxs)("div",{className:"flex items-start space-x-4",children:[r.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center ${"status"===e.type?o(e.toStatus).replace("text-","bg-").replace("bg-","bg-opacity-20 text-"):u(e.fromPrice,e.toPrice).replace("text-","bg-").replace("bg-","bg-opacity-20 text-")}`,children:r.jsx("div",{className:"w-5 h-5 flex items-center justify-center",children:r.jsx("i",{className:"status"===e.type?n(e.fromStatus,e.toStatus):m(e.fromPrice,e.toPrice)})})}),(0,r.jsxs)("div",{className:"flex-1 bg-gray-900 rounded-lg p-3",children:[r.jsx("div",{className:"flex items-center justify-between mb-2",children:r.jsx("div",{className:"flex items-center space-x-2",children:"status"===e.type?(0,r.jsxs)(r.Fragment,{children:[r.jsx("span",{className:"text-white font-medium",children:"Status Changed"}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[e.fromStatus&&(0,r.jsxs)(r.Fragment,{children:[r.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${o(e.fromStatus)}`,children:e.fromStatus}),r.jsx("div",{className:"w-3 h-3 flex items-center justify-center",children:r.jsx("i",{className:"ri-arrow-right-line text-gray-500"})})]}),r.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${o(e.toStatus)}`,children:e.toStatus})]})]}):(0,r.jsxs)(r.Fragment,{children:[r.jsx("span",{className:"text-white font-medium",children:"Price Changed"}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[e.fromPrice&&(0,r.jsxs)(r.Fragment,{children:[r.jsx("span",{className:"text-gray-300 text-sm",children:d(e.fromPrice)}),r.jsx("div",{className:"w-3 h-3 flex items-center justify-center",children:r.jsx("i",{className:"ri-arrow-right-line text-gray-500"})})]}),r.jsx("span",{className:"text-white font-medium",children:d(e.toPrice)})]})]})})}),r.jsx("div",{className:"text-xs text-gray-400 mb-2",children:c(e.timestamp)}),e.reason&&(0,r.jsxs)("div",{className:"text-sm text-gray-300 mb-1",children:[r.jsx("strong",{children:"Reason:"})," ",e.reason]}),e.notes&&(0,r.jsxs)("div",{className:"text-sm text-gray-300",children:[r.jsx("strong",{children:"Notes:"})," ",e.notes]})]})]})]},e.id))})})]})}function b({isOpen:e,onClose:s,onImportSuccess:t}){let[i,l]=(0,a.useState)(""),[n,c]=(0,a.useState)(!1),[d,m]=(0,a.useState)(!1),[u,x]=(0,a.useState)(""),[p,h]=(0,a.useState)(!1),{user:g}=(0,o.a)(),y=async()=>{if(!i.trim()){x("Please enter a listing link or description");return}if(!n){x("Please confirm you have permission to use this data");return}if(!g?.uid){x("You must be logged in to import properties");return}m(!0),x(""),h(!1);try{let e="https://importpropertyfromtext-x5dsxztz7q-uc.a.run.app",r={text:i.trim(),userId:g.uid};console.log("\uD83D\uDCE4 Sending request to:",e),console.log("\uD83D\uDCE4 Request body:",JSON.stringify(r,null,2));let a=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(console.log("\uD83D\uDCE5 Response status:",a.status),console.log("\uD83D\uDCE5 Response headers:",Object.fromEntries(a.headers.entries())),!a.ok){let e=await a.json();throw console.error("❌ Error response:",e),Error(e.error||e.message||`HTTP ${a.status}`)}let o=await a.json();if(console.log("✅ Success response:",o),o.success)h(!0),console.log("\uD83C\uDF89 Property import successful!"),t(o.data),setTimeout(()=>{s(),l(""),c(!1),h(!1)},1500);else throw Error(o.message||"Import failed")}catch(e){console.error("❌ Property import error:",e),x(e instanceof Error?e.message:"Failed to import property")}finally{m(!1)}},b=()=>{d||(s(),l(""),c(!1),x(""),h(!1))};return e?r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:(0,r.jsxs)("div",{className:"w-full max-w-2xl h-[100dvh] max-h-[100dvh] bg-gray-900 rounded-none sm:rounded-xl shadow-xl flex flex-col",children:[(0,r.jsxs)("header",{className:"px-4 py-3 border-b border-gray-700 flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[r.jsx("h2",{className:"text-xl font-bold text-white",children:"AI Property Importer"}),r.jsx("p",{className:"text-gray-400 text-sm mt-1",children:"Import property details from listing URLs or descriptions"})]}),r.jsx("button",{onClick:b,disabled:d,className:"text-gray-400 hover:text-white transition-colors cursor-pointer disabled:opacity-50",children:r.jsx("div",{className:"w-6 h-6 flex items-center justify-center",children:r.jsx("i",{className:"ri-close-line text-xl"})})})]}),(0,r.jsxs)("div",{className:"flex-1",children:[r.jsx("div",{className:"mobile-scroll overflow-y-auto flex-1 px-4 pb-24 safe-bottom",children:r.jsx("div",{className:"space-y-4 py-4",children:(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{htmlFor:"content",className:"block text-sm font-medium text-gray-300 mb-2",children:"Paste public listing link or description"}),r.jsx("textarea",{id:"content",value:i,onChange:e=>l(e.target.value),placeholder:"https://example.com/property-listing OR paste a property description...",rows:6,className:"w-full px-4 py-3 border border-gray-700 rounded-lg bg-gray-800 text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm resize-none",disabled:d})]}),r.jsx("div",{className:"bg-yellow-900/20 border border-yellow-700/50 rounded-lg p-4",children:(0,r.jsxs)("div",{className:"flex items-start space-x-3",children:[r.jsx("input",{type:"checkbox",id:"permission",checked:n,onChange:e=>c(e.target.checked),disabled:d,className:"mt-1 w-4 h-4 text-blue-600 bg-gray-800 border-gray-600 rounded focus:ring-blue-500 focus:ring-2"}),(0,r.jsxs)("label",{htmlFor:"permission",className:"text-sm text-yellow-200",children:[r.jsx("span",{className:"font-medium",children:"✅ I confirm I have permission to use this data"}),r.jsx("p",{className:"text-xs text-yellow-300 mt-1",children:"Ensure you have the right to import and use this property information"})]})]})}),u&&r.jsx("div",{className:"bg-red-900/20 border border-red-700/50 rounded-lg p-4",children:(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[r.jsx("div",{className:"w-5 h-5 flex items-center justify-center",children:r.jsx("i",{className:"ri-error-warning-line text-red-400"})}),r.jsx("p",{className:"text-red-300 text-sm",children:u})]})}),p&&r.jsx("div",{className:"bg-green-900/20 border border-green-700/50 rounded-lg p-4",children:(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[r.jsx("div",{className:"w-5 h-5 flex items-center justify-center",children:r.jsx("i",{className:"ri-check-line text-green-400"})}),r.jsx("p",{className:"text-green-300 text-sm",children:"Property imported successfully! Opening form..."})]})})]})})}),r.jsx("footer",{className:"sticky bottom-0 left-0 right-0 safe-bottom bg-gray-900/90 backdrop-blur border-t border-gray-700 px-4 py-3",children:(0,r.jsxs)("div",{className:"flex space-x-3",children:[r.jsx("button",{onClick:b,disabled:d,className:"flex-1 px-4 py-3 border border-gray-700 rounded-lg bg-gray-800 text-white hover:bg-gray-700 transition-colors cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),r.jsx("button",{onClick:y,disabled:d||!i.trim()||!n,className:"flex-1 px-4 py-3 bg-blue-600 hover:bg-blue-700 disabled:bg-blue-800 disabled:opacity-50 text-white font-medium rounded-lg transition-colors cursor-pointer flex items-center justify-center space-x-2 disabled:cursor-not-allowed",children:d?(0,r.jsxs)(r.Fragment,{children:[r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),r.jsx("span",{children:"Importing..."})]}):(0,r.jsxs)(r.Fragment,{children:[r.jsx("div",{className:"w-4 h-4 flex items-center justify-center",children:r.jsx("i",{className:"ri-download-line"})}),r.jsx("span",{children:"Import"})]})})]})})]})]})}):null}function f({message:e,type:s,onClose:t,duration:i=3e3}){let[l,o]=(0,a.useState)(!0),n="success"===s?"text-green-300":"text-red-300";return r.jsx("div",{className:`fixed top-4 right-4 z-50 transition-all duration-300 ${l?"opacity-100 translate-x-0":"opacity-0 translate-x-full"}`,children:r.jsx("div",{className:`${"success"===s?"bg-green-900/90":"bg-red-900/90"} border ${"success"===s?"border-green-700":"border-red-700"} rounded-lg p-4 max-w-sm shadow-lg`,children:(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:`w-5 h-5 flex items-center justify-center ${n}`,children:r.jsx("i",{className:`${"success"===s?"ri-check-line":"ri-error-warning-line"} text-lg`})}),r.jsx("p",{className:`${n} text-sm font-medium`,children:e}),r.jsx("button",{onClick:()=>{o(!1),setTimeout(t,300)},className:"text-gray-400 hover:text-white transition-colors cursor-pointer",children:r.jsx("div",{className:"w-4 h-4 flex items-center justify-center",children:r.jsx("i",{className:"ri-close-line"})})})]})})})}var j=t(7463);function N(){let[e,s]=(0,a.useState)([]),[t,m]=(0,a.useState)([]),[u,x]=(0,a.useState)(!1),[p,h]=(0,a.useState)(null),[N,v]=(0,a.useState)(!1),[w,S]=(0,a.useState)(!0),[C,k]=(0,a.useState)(""),[q,P]=(0,a.useState)(""),[E,D]=(0,a.useState)(!1),[F,A]=(0,a.useState)(""),[T,B]=(0,a.useState)("success"),[I,R]=(0,a.useState)(!1),[L,U]=(0,a.useState)(null),[$,O]=(0,a.useState)("Active"),[z,_]=(0,a.useState)(!1),{user:H}=(0,o.a)(),M=(e,s)=>{A(e),B(s),D(!0)},V=e.filter(e=>e.status===$),G=e=>t.filter(s=>s.propertyId===e).length,Z=async e=>{console.log("=== ENHANCED FIRESTORE PROPERTY SAVE DEBUG ==="),console.log("1. Enhanced property data received:",e);try{let s=l.I8.currentUser;if(console.log("2. Current user check:",{user:s,uid:s?.uid,isLoggedIn:!!s}),!s||!s.uid){let e="You must be logged in to add a property.";console.error("3. AUTHENTICATION ERROR:",e),M(e,"error");return}let t={address:!!e.address&&e.address.trim().length>0,price:!!e.price&&!isNaN(e.price)&&e.price>0,bedrooms:!!e.bedrooms&&!isNaN(e.bedrooms),bathrooms:!!e.bathrooms&&!isNaN(e.bathrooms),sqft:!!e.sqft&&!isNaN(e.sqft)&&e.sqft>0,propertyType:!!e.propertyType&&e.propertyType.trim().length>0,status:!!e.status&&e.status.trim().length>0};if(console.log("3. Enhanced field validation results:",t),console.log("4. Enhanced detailed field values:",{address:{value:e.address,type:typeof e.address},price:{value:e.price,type:typeof e.price},bedrooms:{value:e.bedrooms,type:typeof e.bedrooms},bathrooms:{value:e.bathrooms,type:typeof e.bathrooms},sqft:{value:e.sqft,type:typeof e.sqft},propertyType:{value:e.propertyType,type:typeof e.propertyType},status:{value:e.status,type:typeof e.status},propertyFeatures:{value:e.propertyFeatures,length:e.propertyFeatures.length},images:{value:e.images,length:e.images.length}}),!Object.values(t).every(e=>!0===e)){let e="Please fill in all required fields with valid values.";console.error("5. VALIDATION ERROR:",e,t),k(e),alert(e);return}k(""),P("");let r=(0,i.Bt)(),a=new Date,o={address:e.address.trim(),addressLine1:e.addressLine1?.trim()||"",city:e.city?.trim()||"",state:e.state?.trim().toUpperCase()||"",postalCode:e.postalCode?.trim()||"",price:Number(e.price),bedrooms:Number(e.bedrooms),bathrooms:Number(e.bathrooms),sqft:Number(e.sqft),description:e.description?e.description.trim():"",propertyType:e.propertyType,lotSize:e.lotSize?Number(e.lotSize):null,yearBuilt:e.yearBuilt?Number(e.yearBuilt):null,parking:e.parking?e.parking.trim():null,propertyFeatures:e.propertyFeatures||[],mlsNumber:e.mlsNumber?e.mlsNumber.trim():null,status:e.status,images:e.images||[],userId:s.uid,clients:[],statusHistory:[{id:(0,j.Z)(),toStatus:e.status,changedBy:s.uid,changedAt:a,reason:"Property created",notes:"Initial property listing"}],priceHistory:[{id:(0,j.Z)(),toPrice:Number(e.price),changedBy:s.uid,changedAt:a,reason:"Initial listing price",notes:"Property created with initial price"}],createdAt:r};console.log("6. Final enhanced document to save:",o),console.log("7. Firestore collection reference:",(0,i.hJ)(l.db,"properties")),console.log("8. Attempting enhanced addDoc to Firestore...");let n=await (0,i.ET)((0,i.hJ)(l.db,"properties"),o);console.log("9. SUCCESS: Enhanced document saved with ID:",n.id),console.log("=== END ENHANCED FIRESTORE DEBUG ===");let c=`Property "${e.address}" added successfully!`;M(c,"success"),x(!1)}catch(e){console.error("=== ENHANCED FIRESTORE ERROR DEBUG ==="),console.error("Error details:",e),console.error("Error message:",e instanceof Error?e.message:"Unknown error"),console.error("Error stack:",e instanceof Error?e.stack:"No stack trace"),console.error("=== END ENHANCED ERROR DEBUG ==="),M(`Failed to add property: ${e instanceof Error?e.message:"Unknown error"}`,"error")}},Y=async e=>{try{await (0,i.oe)((0,i.JU)(l.db,"properties",e))}catch(e){console.error("Error deleting property:",e)}},J=async e=>{if(p&&H?.uid){console.log("=== PROPERTY UPDATE DEBUG ==="),console.log("1. Property data received:",e),console.log("2. Selected property ID:",p.id);try{let s={address:!!e.address&&e.address.trim().length>0,price:!!e.price&&!isNaN(e.price)&&e.price>0,bedrooms:!!e.bedrooms&&!isNaN(e.bedrooms),bathrooms:!!e.bathrooms&&!isNaN(e.bathrooms),sqft:!!e.sqft&&!isNaN(e.sqft)&&e.sqft>0,propertyType:!!e.propertyType&&e.propertyType.trim().length>0,status:!!e.status&&e.status.trim().length>0};if(console.log("3. Field validation results:",s),!s.address||!s.price||!s.sqft||!s.propertyType||!s.status){let e="Please fill in all required fields with valid values.";console.error("4. VALIDATION ERROR:",e),M(e,"error");return}let t=new Date().toISOString(),r=p.status!==e.status,a=p.price!==e.price,o={address:e.address.trim(),addressLine1:e.addressLine1?.trim()||"",city:e.city?.trim()||"",state:e.state?.trim().toUpperCase()||"",postalCode:e.postalCode?.trim()||"",price:Number(e.price),bedrooms:Number(e.bedrooms),bathrooms:Number(e.bathrooms),sqft:Number(e.sqft),description:e.description?e.description.trim():"",propertyType:e.propertyType,lotSize:e.lotSize?Number(e.lotSize):null,yearBuilt:e.yearBuilt?Number(e.yearBuilt):null,parking:e.parking?e.parking.trim():null,propertyFeatures:e.propertyFeatures||[],mlsNumber:e.mlsNumber?e.mlsNumber.trim():null,status:e.status,images:e.images||[],updatedAt:(0,i.Bt)()};if(r){let s={id:(0,j.Z)(),fromStatus:p.status,toStatus:e.status,changedBy:H.uid,changedAt:t,reason:"Property details updated",notes:"Status changed during property update"};o.statusHistory=(0,i.vr)(s)}if(a){let s={id:(0,j.Z)(),fromPrice:p.price,toPrice:Number(e.price),changedBy:H.uid,changedAt:t,reason:"Property details updated",notes:"Price changed during property update"};o.priceHistory=(0,i.vr)(s)}console.log("5. Final update data:",o),console.log("6. Updating property document...");let n=(0,i.JU)(l.db,"properties",p.id);await (0,i.r7)(n,o),console.log("7. SUCCESS: Property updated successfully"),console.log("=== END PROPERTY UPDATE DEBUG ===");let c=`Property "${e.address}" updated successfully!`;M(c,"success"),v(!1),h(null)}catch(e){console.error("=== PROPERTY UPDATE ERROR DEBUG ==="),console.error("Error details:",e),console.error("Error message:",e instanceof Error?e.message:"Unknown error"),console.error("=== END PROPERTY UPDATE ERROR DEBUG ==="),M(`Failed to update property: ${e instanceof Error?e.message:"Unknown error"}`,"error")}}},W=s=>e.filter(e=>e.status===s).length;if(p){let e=G(p.id);return(0,r.jsxs)(n.Z,{children:[(0,r.jsxs)("div",{className:"min-h-screen bg-gray-900 pb-20",children:[r.jsx(c.Z,{}),(0,r.jsxs)("div",{className:"max-w-md mx-auto px-4 py-6 space-y-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[r.jsx("button",{onClick:()=>{h(null),v(!1)},className:"text-gray-400 hover:text-white transition-colors cursor-pointer",children:r.jsx("div",{className:"w-6 h-6 flex items-center justify-center",children:r.jsx("i",{className:"ri-arrow-left-line text-xl"})})}),(0,r.jsxs)("div",{children:[r.jsx("h1",{className:"text-xl font-bold text-white",children:"Property Details"}),r.jsx("p",{className:"text-gray-400 text-sm",children:p.address})]})]}),!N&&(0,r.jsxs)("button",{onClick:()=>v(!0),className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg transition-colors cursor-pointer flex items-center space-x-2",children:[r.jsx("div",{className:"w-4 h-4 flex items-center justify-center",children:r.jsx("i",{className:"ri-edit-line"})}),r.jsx("span",{children:"Edit"})]})]}),N&&r.jsx(g,{onSubmit:J,onCancel:()=>v(!1),loading:!1,isEditing:!0,initialData:{address:p.address,price:p.price,bedrooms:p.bedrooms,bathrooms:p.bathrooms,sqft:p.sqft,description:p.description,propertyType:p.propertyType,lotSize:p.lotSize,yearBuilt:p.yearBuilt,parking:p.parking,propertyFeatures:p.propertyFeatures,mlsNumber:p.mlsNumber,status:p.status,images:p.images}}),!N&&p.images&&p.images.length>0&&r.jsx("div",{className:"bg-gray-800 rounded-lg overflow-hidden border border-gray-700",children:(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-1",children:[p.images.slice(0,4).map((e,s)=>r.jsx("div",{className:`${0===s&&1===p.images.length?"col-span-2":""} aspect-square`,children:r.jsx("img",{src:e,alt:`Property ${s+1}`,className:"w-full h-full object-cover"})},s)),p.images.length>4&&(0,r.jsxs)("div",{className:"absolute bottom-2 right-2 bg-black/60 text-white px-2 py-1 rounded text-xs",children:["+",p.images.length-4," more"]})]})}),!N&&(0,r.jsxs)("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-700",children:[(0,r.jsxs)("div",{className:"space-y-3",children:[p.addressLine1&&(0,r.jsxs)("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-400",children:"Street Address"}),r.jsx("span",{className:"text-white font-medium",children:p.addressLine1})]}),p.city&&(0,r.jsxs)("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-400",children:"City"}),r.jsx("span",{className:"text-white",children:p.city})]}),p.state&&(0,r.jsxs)("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-400",children:"State/Province"}),r.jsx("span",{className:"text-white",children:p.state})]}),p.postalCode&&(0,r.jsxs)("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-400",children:"Postal Code"}),r.jsx("span",{className:"text-white",children:p.postalCode})]}),(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-gray-400",children:"Status"}),r.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${"Active"===p.status?"bg-green-900/30 text-green-300":"Coming Soon"===p.status?"bg-yellow-900/30 text-yellow-300":"bg-red-900/30 text-red-300"}`,children:p.status})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-400",children:"Property Type"}),r.jsx("span",{className:"text-white font-medium",children:p.propertyType})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-400",children:"Price"}),(0,r.jsxs)("span",{className:"text-white font-medium",children:["$",p.price.toLocaleString()]})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-400",children:"Bedrooms"}),r.jsx("span",{className:"text-white",children:p.bedrooms})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-400",children:"Bathrooms"}),r.jsx("span",{className:"text-white",children:p.bathrooms})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-400",children:"Square Feet"}),r.jsx("span",{className:"text-white",children:p.sqft.toLocaleString()})]}),p.lotSize&&(0,r.jsxs)("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-400",children:"Lot Size"}),(0,r.jsxs)("span",{className:"text-white",children:[p.lotSize.toLocaleString()," sq ft"]})]}),p.yearBuilt&&(0,r.jsxs)("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-400",children:"Year Built"}),r.jsx("span",{className:"text-white",children:p.yearBuilt})]}),p.parking&&(0,r.jsxs)("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-400",children:"Parking"}),r.jsx("span",{className:"text-white",children:p.parking})]}),p.mlsNumber&&(0,r.jsxs)("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-400",children:"MLS Number"}),r.jsx("span",{className:"text-white",children:p.mlsNumber})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-400",children:"Linked Recordings"}),r.jsx("span",{className:"text-blue-400 font-medium",children:e})]})]}),p.propertyFeatures&&p.propertyFeatures.length>0&&(0,r.jsxs)("div",{className:"mt-4 pt-4 border-t border-gray-700",children:[r.jsx("h4",{className:"text-gray-400 text-sm font-medium mb-2",children:"Features"}),r.jsx("div",{className:"flex flex-wrap gap-1",children:p.propertyFeatures.map((e,s)=>r.jsx("span",{className:"px-2 py-1 bg-blue-900/30 text-blue-300 rounded-full text-xs",children:e},s))})]}),p.description&&r.jsx("div",{className:"mt-4 pt-4 border-t border-gray-700",children:r.jsx("p",{className:"text-gray-300 text-sm",children:p.description})})]}),!N&&r.jsx(y,{statusHistory:p.statusHistory||[],priceHistory:p.priceHistory||[],loading:!1}),!N&&(0,r.jsxs)("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-700",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2 mb-4",children:[r.jsx("div",{className:"w-4 h-4 flex items-center justify-center",children:r.jsx("i",{className:"ri-user-line text-blue-500"})}),r.jsx("h3",{className:"font-medium text-white",children:"Clients"})]}),p.clients?.length===0?r.jsx("p",{className:"text-gray-400 text-sm",children:"No clients recorded for this property yet"}):r.jsx("div",{className:"space-y-3",children:p.clients?.map(e=>r.jsxs("div",{className:"bg-gray-900 rounded-lg p-3",children:[r.jsxs("div",{className:"flex justify-between items-start mb-2",children:[r.jsx("h4",{className:"text-white font-medium",children:e.name}),r.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${"interested"===e.status?"bg-green-900 text-green-300":"not_interested"===e.status?"bg-red-900 text-red-300":"bg-yellow-900 text-yellow-300"}`,children:e.status.replace("_"," ")})]}),r.jsxs("div",{className:"space-y-1 text-sm text-gray-400",children:[r.jsx("p",{children:e.email}),r.jsx("p",{children:e.phone}),e.showingDate&&r.jsxs("p",{children:["Showing: ",e.showingDate]})]})]},e.id))})]})]}),r.jsx(d.Z,{})]}),E&&r.jsx(f,{message:F,type:T,onClose:()=>D(!1)})]})}return r.jsx(n.Z,{children:(0,r.jsxs)("div",{className:"min-h-screen bg-gray-900 pb-20",children:[r.jsx(c.Z,{}),(0,r.jsxs)("div",{className:"max-w-md mx-auto px-4 py-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,r.jsxs)("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-white mb-2",children:"Properties"}),r.jsx("p",{className:"text-gray-400",children:"Manage your property listings"})]}),(0,r.jsxs)("div",{className:"flex space-x-2",children:[(0,r.jsxs)("button",{onClick:()=>R(!0),className:"px-3 py-2 bg-green-600 hover:bg-green-700 rounded-lg flex items-center space-x-2 transition-colors cursor-pointer text-sm font-medium",title:"Add by Link or Description",children:[r.jsx("div",{className:"w-4 h-4 flex items-center justify-center",children:r.jsx("i",{className:"ri-download-line text-white"})}),r.jsx("span",{className:"text-white",children:"Import"})]}),r.jsx("button",{onClick:()=>x(!0),className:"w-10 h-10 bg-blue-600 hover:bg-blue-700 rounded-full flex items-center justify-center transition-colors cursor-pointer whitespace-nowrap",title:"Add Property",children:r.jsx("div",{className:"w-5 h-5 flex items-center justify-center",children:r.jsx("i",{className:"ri-add-line text-white text-xl"})})})]})]}),r.jsx("div",{className:"flex bg-gray-800 rounded-lg p-1 mb-6",children:["Active","Coming Soon","Sold"].map(e=>{let s=W(e);return(0,r.jsxs)("button",{onClick:()=>O(e),className:`flex-1 px-1 py-1 text-sm font-medium transition-colors cursor-pointer whitespace-nowrap rounded-full flex items-center justify-center space-x-1 ${$===e?"bg-blue-600 text-white":"text-gray-400 hover:text-white"}`,children:[r.jsx("span",{children:e}),r.jsx("span",{className:`text-xs px-1.5 py-0.5 rounded-full ${$===e?"bg-blue-700 text-blue-100":"bg-gray-700 text-gray-300"}`,children:s})]},e)})}),C&&(0,r.jsxs)("div",{className:"mb-4 p-3 bg-red-900/30 border border-red-700 rounded-lg",children:[r.jsx("p",{className:"text-red-300 text-sm",children:C}),r.jsx("button",{onClick:()=>k(""),className:"text-red-400 hover:text-red-300 text-xs mt-1 cursor-pointer",children:"Dismiss"})]}),q&&(0,r.jsxs)("div",{className:"mb-4 p-3 bg-green-900/30 border border-green-700 rounded-lg",children:[r.jsx("p",{className:"text-green-300 text-sm",children:q}),r.jsx("button",{onClick:()=>P(""),className:"text-green-400 hover:text-green-300 text-xs mt-1 cursor-pointer",children:"Dismiss"})]}),u&&r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:(0,r.jsxs)("div",{className:"w-full max-w-2xl h-[100dvh] max-h-[100dvh] bg-gray-800 rounded-none sm:rounded-xl shadow-xl flex flex-col",children:[(0,r.jsxs)("header",{className:"px-4 py-3 border-b border-gray-700 flex items-center justify-between",children:[r.jsx("h2",{className:"text-lg font-semibold text-white",children:"Add New Property"}),r.jsx("button",{onClick:()=>{x(!1),k(""),P("")},className:"text-gray-400 hover:text-white transition-colors cursor-pointer",children:r.jsx("div",{className:"w-5 h-5 flex items-center justify-center",children:r.jsx("i",{className:"ri-close-line text-xl"})})})]}),r.jsx("div",{className:"flex-1",children:r.jsx(g,{onSubmit:Z,onCancel:()=>{x(!1),k(""),P(""),U(null)},initialData:L})})]})}),w?(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center py-12",children:[r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mb-4"}),r.jsx("p",{className:"text-gray-400 text-sm",children:"Loading your properties..."})]}):H?0===V.length?(0,r.jsxs)("div",{className:"text-center py-12",children:[r.jsx("div",{className:"w-16 h-16 mx-auto mb-4 flex items-center justify-center",children:r.jsx("i",{className:"ri-home-line text-4xl text-gray-600"})}),(0,r.jsxs)("h3",{className:"text-lg font-medium text-gray-400 mb-2",children:["No ",$.toLowerCase()," properties"]}),r.jsx("p",{className:"text-gray-500",children:0===e.length?"Add your first property to get started":`Switch to another tab or add your first ${$.toLowerCase()} property`})]}):r.jsx("div",{className:"space-y-4",children:V.map(e=>{let s=G(e.id);return(0,r.jsxs)("div",{onClick:()=>h(e),className:"bg-gray-800 rounded-lg p-4 border border-gray-700 hover:border-gray-600 transition-colors cursor-pointer",children:[e.images&&e.images.length>0&&(0,r.jsxs)("div",{className:"mb-3 rounded-lg overflow-hidden",children:[r.jsx("img",{src:e.images[0],alt:"Property",className:"w-full h-32 object-cover"}),e.images.length>1&&(0,r.jsxs)("div",{className:"absolute top-2 right-2 bg-black/60 text-white px-2 py-1 rounded text-xs",children:["+",e.images.length-1]})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[r.jsx("h3",{className:"font-medium text-white truncate",children:e.address}),r.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${"Active"===e.status?"bg-green-900/30 text-green-300":"Coming Soon"===e.status?"bg-yellow-900/30 text-yellow-300":"bg-red-900/30 text-red-300"}`,children:e.status})]}),r.jsx("button",{onClick:s=>{s.stopPropagation(),Y(e.id)},className:"text-gray-400 hover:text-red-400 transition-colors cursor-pointer",children:r.jsx("div",{className:"w-5 h-5 flex items-center justify-center",children:r.jsx("i",{className:"ri-delete-bin-line"})})})]}),(0,r.jsxs)("div",{className:"mb-2",children:[(0,r.jsxs)("p",{className:"text-blue-400 font-semibold text-lg",children:["$",e.price.toLocaleString()]}),r.jsx("p",{className:"text-gray-400 text-sm",children:e.propertyType})]}),r.jsx("div",{className:"flex items-center justify-between text-sm text-gray-400 mb-2",children:(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsxs)("span",{children:[e.bedrooms," bed"]}),(0,r.jsxs)("span",{children:[e.bathrooms," bath"]}),(0,r.jsxs)("span",{children:[e.sqft.toLocaleString()," sqft"]})]})}),e.propertyFeatures&&e.propertyFeatures.length>0&&(0,r.jsxs)("div",{className:"flex flex-wrap gap-1 mb-2",children:[e.propertyFeatures.slice(0,3).map((e,s)=>r.jsx("span",{className:"px-2 py-1 bg-blue-900/30 text-blue-300 rounded-full text-xs",children:e},s)),e.propertyFeatures.length>3&&(0,r.jsxs)("span",{className:"px-2 py-1 bg-gray-700 text-gray-400 rounded-full text-xs",children:["+",e.propertyFeatures.length-3]})]}),s>0&&(0,r.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[r.jsx("div",{className:"w-4 h-4 flex items-center justify-center",children:r.jsx("i",{className:"ri-mic-line text-blue-500"})}),(0,r.jsxs)("span",{className:"text-xs text-blue-400",children:[s," recording",1!==s?"s":""," linked"]})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("span",{className:"text-xs text-gray-500",children:[e.clients?.length||0," client",1!==(e.clients?.length||0)?"s":""]}),r.jsx("div",{className:"w-4 h-4 flex items-center justify-center",children:r.jsx("i",{className:"ri-arrow-right-s-line text-gray-500"})})]})]},e.id)})}):(0,r.jsxs)("div",{className:"text-center py-12",children:[r.jsx("div",{className:"w-16 h-16 mx-auto mb-4 flex items-center justify-center",children:r.jsx("i",{className:"ri-user-line text-4xl text-gray-600"})}),r.jsx("h3",{className:"text-lg font-medium text-gray-400 mb-2",children:"Authentication Required"}),r.jsx("p",{className:"text-gray-500",children:"Please log in to view your properties"})]})]}),r.jsx(d.Z,{}),r.jsx(b,{isOpen:I,onClose:()=>R(!1),onImportSuccess:e=>{U(e),x(!0),M("Property data imported successfully! Please review and save.","success")}}),E&&r.jsx(f,{message:F,type:T,onClose:()=>D(!1)})]})})}},4321:(e,s,t)=>{"use strict";t.d(s,{Z:()=>i});var r=t(326),a=t(7577);function i({value:e,onChange:s,placeholder:t="Type tags separated by commas...",label:i="Tags",className:l="",disabled:o=!1}){let[n,c]=(0,a.useState)(""),d=()=>{if(!n.trim())return;let t=n.split(",").map(e=>e.trim()).filter(e=>e.length>0).filter(s=>!e.includes(s));t.length>0&&(s([...e,...t]),c(""))},m=t=>{s(e.filter(e=>e!==t))};return(0,r.jsxs)("div",{className:l,children:[i&&(0,r.jsxs)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:[i,r.jsx("span",{className:"text-gray-500 text-xs ml-2",children:"(comma-separated)"})]}),r.jsx("input",{type:"text",value:n,onChange:e=>{c(e.target.value)},onKeyDown:e=>{("Enter"===e.key||","===e.key)&&(e.preventDefault(),d())},onBlur:()=>{d()},placeholder:t,disabled:o,className:"w-full px-4 py-3 border border-gray-700 rounded-lg bg-gray-800 text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm disabled:opacity-50 disabled:cursor-not-allowed"}),e.length>0&&r.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:e.map((e,s)=>(0,r.jsxs)("span",{className:"px-2 py-1 bg-blue-900/30 text-blue-300 rounded-full text-xs flex items-center space-x-1 group",children:[r.jsx("span",{children:e}),!o&&r.jsx("button",{type:"button",onClick:()=>m(e),className:"text-blue-400 hover:text-blue-200 transition-colors cursor-pointer",children:r.jsx("div",{className:"w-3 h-3 flex items-center justify-center",children:r.jsx("i",{className:"ri-close-line text-xs"})})})]},s))})]})}},7463:(e,s,t)=>{"use strict";t.d(s,{Z:()=>c});var r=t(6005),a=t.n(r);let i={randomUUID:a().randomUUID},l=new Uint8Array(256),o=l.length,n=[];for(let e=0;e<256;++e)n.push((e+256).toString(16).slice(1));let c=function(e,s,t){if(i.randomUUID&&!s&&!e)return i.randomUUID();let r=(e=e||{}).random||(e.rng||function(){return o>l.length-16&&(a().randomFillSync(l),o=0),l.slice(o,o+=16)})();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,s){t=t||0;for(let e=0;e<16;++e)s[t+e]=r[e];return s}return function(e,s=0){return(n[e[s+0]]+n[e[s+1]]+n[e[s+2]]+n[e[s+3]]+"-"+n[e[s+4]]+n[e[s+5]]+"-"+n[e[s+6]]+n[e[s+7]]+"-"+n[e[s+8]]+n[e[s+9]]+"-"+n[e[s+10]]+n[e[s+11]]+n[e[s+12]]+n[e[s+13]]+n[e[s+14]]+n[e[s+15]]).toLowerCase()}(r)}},7587:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>r});let r=(0,t(8570).createProxy)(String.raw`C:\NB\showAI_V3\app\properties\page.tsx#default`)}};var s=require("../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[916,379,226],()=>t(1962));module.exports=r})();