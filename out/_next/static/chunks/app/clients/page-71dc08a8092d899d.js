(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[849],{2235:function(e,t,s){Promise.resolve().then(s.bind(s,844))},844:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return f}});var r=s(7437),a=s(2265),l=s(5978),i=s(7293),n=s(6362),c=s(813),d=s(4196),o=s(1344);function x(e){let{searchTerm:t,onSearchChange:s,statusFilter:l,onStatusFilterChange:i,sortBy:n,onSortChange:c,statusCounts:d}=e,[o,x]=(0,a.useState)(!1);return(0,r.jsxs)("div",{className:"mb-6 space-y-4",children:[(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,r.jsx)("div",{className:"w-5 h-5 flex items-center justify-center",children:(0,r.jsx)("i",{className:"ri-search-line text-gray-400"})})}),(0,r.jsx)("input",{type:"text",value:t,onChange:e=>s(e.target.value),className:"w-full pl-10 pr-4 py-3 bg-gray-800 border border-gray-700 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",placeholder:"Search by name, email, tags, or preferences..."})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("button",{onClick:()=>x(!o),className:"flex items-center space-x-2 px-4 py-2 bg-gray-800 hover:bg-gray-700 border border-gray-700 rounded-lg text-white transition-colors cursor-pointer whitespace-nowrap",children:[(0,r.jsx)("div",{className:"w-4 h-4 flex items-center justify-center",children:(0,r.jsx)("i",{className:"ri-filter-line"})}),(0,r.jsx)("span",{className:"text-sm",children:"Filters"}),(0,r.jsx)("div",{className:"w-4 h-4 flex items-center justify-center",children:(0,r.jsx)("i",{className:"ri-arrow-".concat(o?"up":"down","-s-line transition-transform")})})]}),(0,r.jsx)("div",{className:"flex items-center space-x-2 text-xs text-gray-400",children:(0,r.jsxs)("span",{children:[d[l]," client",1!==d[l]?"s":""]})})]}),o&&(0,r.jsxs)("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-700 space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Status"}),(0,r.jsx)("div",{className:"grid grid-cols-2 gap-2",children:[{key:"all",label:"All Clients",count:d.all},{key:"Hot Lead",label:"Hot Leads",count:d["Hot Lead"]},{key:"Active",label:"Active",count:d.Active},{key:"Cold",label:"Cold",count:d.Cold}].map(e=>(0,r.jsx)("button",{onClick:()=>i(e.key),className:"p-2 rounded-lg text-left transition-colors cursor-pointer ".concat(l===e.key?"bg-blue-600 text-white":"bg-gray-900 text-gray-300 hover:bg-gray-700"),children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("span",{className:"text-sm font-medium",children:e.label}),(0,r.jsx)("span",{className:"text-xs px-1.5 py-0.5 rounded-full ".concat(l===e.key?"bg-blue-700 text-blue-100":"bg-gray-700 text-gray-400"),children:e.count})]})},e.key))})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Sort By"}),(0,r.jsx)("div",{className:"grid grid-cols-1 gap-2",children:[{value:"recent",label:"Recent Activity",icon:"ri-time-line"},{value:"name",label:"Name (A-Z)",icon:"ri-sort-asc"},{value:"interactions",label:"Most Interactions",icon:"ri-chat-3-line"},{value:"status",label:"Lead Status",icon:"ri-fire-line"}].map(e=>(0,r.jsxs)("button",{onClick:()=>c(e.value),className:"p-2 rounded-lg text-left transition-colors cursor-pointer flex items-center space-x-2 ".concat(n===e.value?"bg-blue-600 text-white":"bg-gray-900 text-gray-300 hover:bg-gray-700"),children:[(0,r.jsx)("div",{className:"w-4 h-4 flex items-center justify-center",children:(0,r.jsx)("i",{className:e.icon})}),(0,r.jsx)("span",{className:"text-sm",children:e.label}),n===e.value&&(0,r.jsx)("div",{className:"w-4 h-4 flex items-center justify-center ml-auto",children:(0,r.jsx)("i",{className:"ri-check-line"})})]},e.value))})]})]})]})}function m(e){var t;let{client:s,onClick:a,onStatusUpdate:l}=e,i=e=>{switch(e){case"Hot Lead":return"bg-red-900/30 text-red-300 border-red-700/50";case"Active":return"bg-green-900/30 text-green-300 border-green-700/50";default:return"bg-gray-700/50 text-gray-400 border-gray-600/50"}},n=e=>{switch(e){case"high":return"text-red-400";case"medium":return"text-yellow-400";case"low":return"text-green-400";default:return"text-gray-400"}},c=(e,t)=>{e.stopPropagation(),l(s.id,t)};return(0,r.jsxs)("div",{onClick:a,className:"bg-gray-800 rounded-lg p-4 border border-gray-700 hover:border-gray-600 transition-colors cursor-pointer",children:[(0,r.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2 mb-1",children:[(0,r.jsx)("h3",{className:"font-semibold text-white text-lg",children:s.name}),s.averageSentiment&&(0,r.jsx)("div",{className:"w-4 h-4 flex items-center justify-center",children:(0,r.jsx)("i",{className:(e=>{switch(e){case"positive":return"ri-emotion-happy-line text-green-400";case"negative":return"ri-emotion-unhappy-line text-red-400";default:return"ri-emotion-normal-line text-gray-400"}})(s.averageSentiment)})})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-3 text-sm text-gray-400",children:[s.email&&(0,r.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,r.jsx)("div",{className:"w-3 h-3 flex items-center justify-center",children:(0,r.jsx)("i",{className:"ri-mail-line"})}),(0,r.jsx)("span",{className:"truncate max-w-32",children:s.email})]}),s.phone&&(0,r.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,r.jsx)("div",{className:"w-3 h-3 flex items-center justify-center",children:(0,r.jsx)("i",{className:"ri-phone-line"})}),(0,r.jsx)("span",{children:s.phone})]})]})]}),(0,r.jsxs)("div",{className:"relative group",children:[(0,r.jsx)("div",{className:"px-2 py-1 rounded-full text-xs font-medium border ".concat(i(s.status)),children:s.status}),(0,r.jsx)("div",{className:"absolute right-0 top-full mt-1 bg-gray-800 border border-gray-700 rounded-lg shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-10 min-w-28",children:["Hot Lead","Active","Cold"].filter(e=>e!==s.status).map(e=>(0,r.jsx)("button",{onClick:t=>c(t,e),className:"w-full px-3 py-2 text-left text-sm hover:bg-gray-700 first:rounded-t-lg last:rounded-b-lg transition-colors cursor-pointer whitespace-nowrap ".concat(i(e).split(" ")[1]),children:e},e))})]})]}),(0,r.jsxs)("div",{className:"mb-3",children:[(0,r.jsx)("div",{className:"flex items-center justify-between text-sm",children:(0,r.jsxs)("div",{className:"flex items-center space-x-2 text-gray-300",children:[(0,r.jsxs)("span",{children:["\uD83D\uDCB0 $",s.preferences.priceRange.min.toLocaleString()," - $",s.preferences.priceRange.max.toLocaleString()]}),(0,r.jsx)("span",{className:"px-1.5 py-0.5 rounded text-xs font-medium ".concat(n(s.preferences.urgency).replace("text-","bg-").replace("-400","-900/30")," ").concat(n(s.preferences.urgency)),children:s.preferences.urgency.toUpperCase()})]})}),s.preferences.preferredAreas.length>0&&(0,r.jsxs)("div",{className:"flex flex-wrap gap-1 mt-2",children:[s.preferences.preferredAreas.slice(0,3).map((e,t)=>(0,r.jsxs)("span",{className:"px-2 py-1 bg-blue-900/30 text-blue-300 rounded-full text-xs",children:["\uD83D\uDCCD ",e]},t)),s.preferences.preferredAreas.length>3&&(0,r.jsxs)("span",{className:"px-2 py-1 bg-gray-700 text-gray-400 rounded-full text-xs",children:["+",s.preferences.preferredAreas.length-3]})]})]}),s.tags.length>0&&(0,r.jsxs)("div",{className:"flex flex-wrap gap-1 mb-3",children:[s.tags.slice(0,4).map((e,t)=>(0,r.jsx)("span",{className:"px-2 py-1 bg-purple-900/30 text-purple-300 rounded-full text-xs",children:e},t)),s.tags.length>4&&(0,r.jsxs)("span",{className:"px-2 py-1 bg-gray-700 text-gray-400 rounded-full text-xs",children:["+",s.tags.length-4]})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-4 text-gray-400",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,r.jsx)("div",{className:"w-3 h-3 flex items-center justify-center",children:(0,r.jsx)("i",{className:"ri-chat-3-line"})}),(0,r.jsxs)("span",{children:[s.totalInteractions," interaction",1!==s.totalInteractions?"s":""]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,r.jsx)("div",{className:"w-3 h-3 flex items-center justify-center",children:(0,r.jsx)("i",{className:"ri-mic-line"})}),(0,r.jsxs)("span",{children:[s.linkedRecordings.length," recording",1!==s.linkedRecordings.length?"s":""]})]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("span",{className:"text-xs text-gray-500",children:(t=s.lastInteraction||s.createdAt)?(t.toDate?t.toDate():new Date(t)).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"No interactions"}),(0,r.jsx)("div",{className:"w-4 h-4 flex items-center justify-center",children:(0,r.jsx)("i",{className:"ri-arrow-right-s-line text-gray-500"})})]})]})]})}function u(e){let{client:t,recordings:s,loading:a}=e,l=e=>e?(e.toDate?e.toDate():new Date(e)).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"}):"Unknown",i=(e,t)=>{switch(e){case"recording":return{icon:"ri-mic-line",color:"bg-blue-500",bgColor:"bg-blue-900/30",borderColor:"border-blue-700"};case"note":let s=null==t?void 0:t.type;return{icon:"action-item"===s?"ri-task-line":"objection"===s?"ri-alert-line":"insight"===s?"ri-lightbulb-line":"ri-sticky-note-line",color:"action-item"===s?"bg-green-500":"objection"===s?"bg-red-500":"insight"===s?"bg-yellow-500":"bg-gray-500",bgColor:"action-item"===s?"bg-green-900/30":"objection"===s?"bg-red-900/30":"insight"===s?"bg-yellow-900/30":"bg-gray-900/30",borderColor:"action-item"===s?"border-green-700":"objection"===s?"border-red-700":"insight"===s?"border-yellow-700":"border-gray-700"};case"created":return{icon:"ri-user-add-line",color:"bg-purple-500",bgColor:"bg-purple-900/30",borderColor:"border-purple-700"};default:return{icon:"ri-time-line",color:"bg-gray-500",bgColor:"bg-gray-900/30",borderColor:"border-gray-700"}}},n=e=>{switch(e){case"positive":return"ri-emotion-happy-line text-green-400";case"negative":return"ri-emotion-unhappy-line text-red-400";default:return"ri-emotion-normal-line text-gray-400"}},c=(()=>{var e;let r=[];return r.push({id:"created",type:"created",timestamp:t.createdAt,data:{clientName:t.name}}),s.forEach(e=>{r.push({id:e.id,type:"recording",timestamp:e.createdAt,data:e})}),null===(e=t.notes)||void 0===e||e.forEach(e=>{r.push({id:e.id,type:"note",timestamp:e.createdAt,data:e})}),r.sort((e,t)=>{var s,r,a,l;let i=(null===(r=e.timestamp)||void 0===r?void 0:null===(s=r.toDate)||void 0===s?void 0:s.call(r))||new Date(e.timestamp);return((null===(l=t.timestamp)||void 0===l?void 0:null===(a=l.toDate)||void 0===a?void 0:a.call(l))||new Date(t.timestamp))-i})})();return a?(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center py-12",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mb-4"}),(0,r.jsx)("p",{className:"text-gray-400 text-sm",children:"Loading timeline..."})]}):0===c.length?(0,r.jsxs)("div",{className:"text-center py-12",children:[(0,r.jsx)("div",{className:"w-16 h-16 mx-auto mb-4 flex items-center justify-center",children:(0,r.jsx)("i",{className:"ri-timeline-view text-4xl text-gray-600"})}),(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-400 mb-2",children:"No timeline events"}),(0,r.jsx)("p",{className:"text-gray-500",children:"Client activity will appear here"})]}):(0,r.jsx)("div",{className:"space-y-1",children:c.map((e,t)=>{let s=i(e.type,e.data),a=t===c.length-1;return(0,r.jsxs)("div",{className:"relative",children:[!a&&(0,r.jsx)("div",{className:"absolute left-6 top-12 w-0.5 h-8 bg-gray-700"}),(0,r.jsx)("div",{className:"bg-gray-800 rounded-lg p-4 border ".concat(s.borderColor," ").concat(s.bgColor),children:(0,r.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,r.jsx)("div",{className:"w-6 h-6 ".concat(s.color," rounded-full flex items-center justify-center flex-shrink-0 mt-0.5"),children:(0,r.jsx)("div",{className:"w-4 h-4 flex items-center justify-center",children:(0,r.jsx)("i",{className:"".concat(s.icon," text-white text-sm")})})}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,r.jsxs)("h4",{className:"font-medium text-white text-sm",children:["recording"===e.type&&"Recording Session","note"===e.type&&"".concat(e.data.type.replace("-"," ").replace(/\b\w/g,e=>e.toUpperCase())," Note"),"created"===e.type&&"Client Created"]}),(0,r.jsx)("span",{className:"text-xs text-gray-400 flex-shrink-0",children:l(e.timestamp)})]}),"recording"===e.type&&(0,r.jsxs)("div",{className:"space-y-2",children:[e.data.propertyAddress&&(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("div",{className:"w-3 h-3 flex items-center justify-center",children:(0,r.jsx)("i",{className:"ri-home-line text-blue-400"})}),(0,r.jsx)("span",{className:"text-gray-300 text-sm",children:e.data.propertyAddress})]}),e.data.overallSentiment&&(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("div",{className:"w-3 h-3 flex items-center justify-center",children:(0,r.jsx)("i",{className:n(e.data.overallSentiment)})}),(0,r.jsxs)("span",{className:"text-gray-300 text-sm capitalize",children:[e.data.overallSentiment," sentiment"]})]}),e.data.tags&&e.data.tags.length>0&&(0,r.jsxs)("div",{className:"flex flex-wrap gap-1 mt-2",children:[e.data.tags.slice(0,3).map((e,t)=>(0,r.jsx)("span",{className:"px-2 py-1 bg-blue-900/30 text-blue-300 rounded-full text-xs",children:e},t)),e.data.tags.length>3&&(0,r.jsxs)("span",{className:"px-2 py-1 bg-gray-700 text-gray-400 rounded-full text-xs",children:["+",e.data.tags.length-3]})]}),e.data.transcript&&(0,r.jsx)("div",{className:"mt-2 p-2 bg-gray-900/50 rounded text-xs text-gray-300 max-h-16 overflow-y-auto",children:e.data.transcript.length>150?"".concat(e.data.transcript.substring(0,150),"..."):e.data.transcript})]}),"note"===e.type&&(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("p",{className:"text-gray-300 text-sm leading-relaxed",children:e.data.content}),(0,r.jsx)("div",{className:"flex items-center space-x-2",children:(0,r.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat("action-item"===e.data.type?"bg-green-900/30 text-green-300":"objection"===e.data.type?"bg-red-900/30 text-red-300":"insight"===e.data.type?"bg-yellow-900/30 text-yellow-300":"bg-gray-700 text-gray-300"),children:e.data.type.replace("-"," ")})})]}),"created"===e.type&&(0,r.jsx)("p",{className:"text-gray-300 text-sm",children:"Client profile was created in the system"})]})]})})]},e.id)})})}let h=[{value:"general",label:"General Note",icon:"ri-sticky-note-line",color:"bg-gray-600 hover:bg-gray-700",tagColor:"bg-gray-700 text-gray-300"},{value:"insight",label:"Client Insight",icon:"ri-lightbulb-line",color:"bg-yellow-600 hover:bg-yellow-700",tagColor:"bg-yellow-900/30 text-yellow-300"},{value:"action-item",label:"Action Item",icon:"ri-task-line",color:"bg-green-600 hover:bg-green-700",tagColor:"bg-green-900/30 text-green-300"},{value:"objection",label:"Objection/Concern",icon:"ri-alert-line",color:"bg-red-600 hover:bg-red-700",tagColor:"bg-red-900/30 text-red-300"}];function g(e){var t;let{client:s,onAddNote:l}=e,[i,n]=(0,a.useState)(!1),[c,d]=(0,a.useState)(""),[o,x]=(0,a.useState)("general"),[m,u]=(0,a.useState)(!1),g=async e=>{if(e.preventDefault(),c.trim()&&!m){u(!0);try{await l(s.id,{content:c.trim(),type:o,createdAt:new Date,createdBy:"current-user"}),d(""),x("general"),n(!1)}catch(e){console.error("Error adding note:",e)}finally{u(!1)}}},p=e=>e?(e.toDate?e.toDate():new Date(e)).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"}):"Unknown",j=e=>h.find(t=>t.value===e)||h[0],f=(s.notes||[]).sort((e,t)=>{var s,r,a,l;let i=(null===(r=e.createdAt)||void 0===r?void 0:null===(s=r.toDate)||void 0===s?void 0:s.call(r))||new Date(e.createdAt);return((null===(l=t.createdAt)||void 0===l?void 0:null===(a=l.toDate)||void 0===a?void 0:a.call(l))||new Date(t.createdAt))-i});return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("h3",{className:"font-medium text-white",children:["Notes (",(null===(t=s.notes)||void 0===t?void 0:t.length)||0,")"]}),(0,r.jsxs)("button",{onClick:()=>n(!i),className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors cursor-pointer whitespace-nowrap",children:[(0,r.jsx)("div",{className:"w-4 h-4 flex items-center justify-center",children:(0,r.jsx)("i",{className:"ri-".concat(i?"close":"add","-line")})}),(0,r.jsx)("span",{className:"text-sm",children:i?"Cancel":"Add Note"})]})]}),i&&(0,r.jsx)("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-700",children:(0,r.jsxs)("form",{onSubmit:g,className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Note Type"}),(0,r.jsx)("div",{className:"grid grid-cols-2 gap-2",children:h.map(e=>(0,r.jsx)("button",{type:"button",onClick:()=>x(e.value),className:"p-3 rounded-lg border text-left transition-colors cursor-pointer ".concat(o===e.value?"bg-blue-600 text-white border-blue-500":"bg-gray-900 text-gray-300 border-gray-700 hover:border-gray-600"),children:(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("div",{className:"w-4 h-4 flex items-center justify-center",children:(0,r.jsx)("i",{className:e.icon})}),(0,r.jsx)("span",{className:"text-sm font-medium",children:e.label})]})},e.value))})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Note Content"}),(0,r.jsx)("textarea",{value:c,onChange:e=>d(e.target.value),className:"w-full px-4 py-3 border border-gray-700 rounded-lg bg-gray-900 text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm resize-none",placeholder:"Enter your note...",rows:4,required:!0,maxLength:1e3}),(0,r.jsxs)("div",{className:"flex justify-between items-center mt-1",children:[(0,r.jsx)("span",{className:"text-xs text-gray-500",children:"Add insights, action items, objections, or general observations"}),(0,r.jsxs)("span",{className:"text-xs text-gray-500",children:[c.length,"/1000"]})]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("button",{type:"submit",disabled:!c.trim()||m,className:"flex items-center space-x-2 px-4 py-2 bg-green-600 hover:bg-green-700 disabled:bg-green-800 disabled:opacity-50 text-white rounded-lg transition-colors cursor-pointer whitespace-nowrap",children:m?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"w-4 h-4 animate-spin rounded-full border-2 border-white border-t-transparent"}),(0,r.jsx)("span",{className:"text-sm",children:"Saving..."})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"w-4 h-4 flex items-center justify-center",children:(0,r.jsx)("i",{className:"ri-save-line"})}),(0,r.jsx)("span",{className:"text-sm",children:"Save Note"})]})}),(0,r.jsx)("button",{type:"button",onClick:()=>{n(!1),d(""),x("general")},className:"px-4 py-2 bg-gray-600 hover:bg-gray-700 text-white rounded-lg transition-colors cursor-pointer whitespace-nowrap",children:"Cancel"})]})]})}),0===f.length?(0,r.jsxs)("div",{className:"text-center py-12",children:[(0,r.jsx)("div",{className:"w-16 h-16 mx-auto mb-4 flex items-center justify-center",children:(0,r.jsx)("i",{className:"ri-sticky-note-line text-4xl text-gray-600"})}),(0,r.jsx)("h4",{className:"text-lg font-medium text-gray-400 mb-2",children:"No notes yet"}),(0,r.jsx)("p",{className:"text-gray-500",children:"Add your first note to track client insights and interactions"})]}):(0,r.jsx)("div",{className:"space-y-4",children:f.map(e=>{let t=j(e.type);return(0,r.jsxs)("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-700",children:[(0,r.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("div",{className:"w-8 h-8 ".concat(t.color.split(" ")[0]," rounded-full flex items-center justify-center"),children:(0,r.jsx)("div",{className:"w-4 h-4 flex items-center justify-center",children:(0,r.jsx)("i",{className:"".concat(t.icon," text-white")})})}),(0,r.jsx)("div",{children:(0,r.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(t.tagColor),children:t.label})})]}),(0,r.jsx)("span",{className:"text-xs text-gray-400",children:p(e.createdAt)})]}),(0,r.jsx)("p",{className:"text-gray-300 text-sm leading-relaxed",children:e.content}),"action-item"===e.type&&(0,r.jsxs)("div",{className:"mt-3 flex items-center space-x-2 text-xs text-green-400",children:[(0,r.jsx)("div",{className:"w-3 h-3 flex items-center justify-center",children:(0,r.jsx)("i",{className:"ri-alarm-line"})}),(0,r.jsx)("span",{children:"Action required"})]}),"objection"===e.type&&(0,r.jsxs)("div",{className:"mt-3 flex items-center space-x-2 text-xs text-red-400",children:[(0,r.jsx)("div",{className:"w-3 h-3 flex items-center justify-center",children:(0,r.jsx)("i",{className:"ri-alert-line"})}),(0,r.jsx)("span",{children:"Address this concern"})]})]},e.id)})})]})}function p(e){var t,s;let{client:n,onBack:c,onStatusUpdate:x,onAddNote:m}=e,[h,p]=(0,a.useState)("overview"),[j,f]=(0,a.useState)([]),[y,b]=(0,a.useState)(!0),[v,N]=(0,a.useState)(null);(0,a.useEffect)(()=>{if(!n.linkedRecordings.length){b(!1);return}let e=(0,l.IO)((0,l.hJ)(i.db,"recordings"),(0,l.ar)("clientName","==",n.name),(0,l.Xo)("createdAt","desc"));return(0,l.cf)(e,e=>{f(e.docs.map(e=>({id:e.id,...e.data()}))),b(!1)})},[n.name,n.linkedRecordings]);let w=async(e,t)=>{try{await navigator.clipboard.writeText(e),N(t),setTimeout(()=>N(null),2e3)}catch(e){console.error("Failed to copy:",e)}},C=e=>e?(e.toDate?e.toDate():new Date(e)).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"}):"Unknown";return(0,r.jsxs)("div",{className:"min-h-screen bg-gray-900 pb-20",children:[(0,r.jsx)(d.Z,{}),(0,r.jsxs)("div",{className:"max-w-md mx-auto px-4 py-6",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3 mb-6",children:[(0,r.jsx)("button",{onClick:c,className:"text-gray-400 hover:text-white transition-colors cursor-pointer",children:(0,r.jsx)("div",{className:"w-6 h-6 flex items-center justify-center",children:(0,r.jsx)("i",{className:"ri-arrow-left-line text-xl"})})}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2 mb-1",children:[(0,r.jsx)("h1",{className:"text-xl font-bold text-white",children:n.name}),n.averageSentiment&&(0,r.jsx)("div",{className:"w-5 h-5 flex items-center justify-center",children:(0,r.jsx)("i",{className:(e=>{switch(e){case"positive":return"ri-emotion-happy-line text-green-400";case"negative":return"ri-emotion-unhappy-line text-red-400";default:return"ri-emotion-normal-line text-gray-400"}})(n.averageSentiment)})})]}),(0,r.jsx)("p",{className:"text-gray-400 text-sm",children:"Client Profile"})]}),(0,r.jsx)("div",{className:"px-3 py-1 rounded-full text-xs font-medium border ".concat((e=>{switch(e){case"Hot Lead":return"bg-red-900/30 text-red-300 border-red-700/50";case"Active":return"bg-green-900/30 text-green-300 border-green-700/50";default:return"bg-gray-700/50 text-gray-400 border-gray-600/50"}})(n.status)),children:n.status})]}),(0,r.jsx)("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-700 mb-6",children:(0,r.jsxs)("div",{className:"space-y-3",children:[n.email&&(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("div",{className:"w-4 h-4 flex items-center justify-center",children:(0,r.jsx)("i",{className:"ri-mail-line text-blue-500"})}),(0,r.jsx)("span",{className:"text-gray-300",children:n.email})]}),(0,r.jsx)("button",{onClick:()=>w(n.email,"email"),className:"text-gray-400 hover:text-white transition-colors cursor-pointer",children:(0,r.jsx)("div",{className:"w-4 h-4 flex items-center justify-center",children:(0,r.jsx)("i",{className:"ri-".concat("email"===v?"check":"file-copy","-line")})})})]}),n.phone&&(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("div",{className:"w-4 h-4 flex items-center justify-center",children:(0,r.jsx)("i",{className:"ri-phone-line text-green-500"})}),(0,r.jsx)("span",{className:"text-gray-300",children:n.phone})]}),(0,r.jsx)("button",{onClick:()=>w(n.phone,"phone"),className:"text-gray-400 hover:text-white transition-colors cursor-pointer",children:(0,r.jsx)("div",{className:"w-4 h-4 flex items-center justify-center",children:(0,r.jsx)("i",{className:"ri-".concat("phone"===v?"check":"file-copy","-line")})})})]}),(0,r.jsx)("div",{className:"flex items-center justify-between",children:(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("div",{className:"w-4 h-4 flex items-center justify-center",children:(0,r.jsx)("i",{className:"ri-calendar-line text-purple-500"})}),(0,r.jsxs)("span",{className:"text-gray-300",children:["Client since ",C(n.createdAt)]})]})}),(0,r.jsx)("div",{className:"flex items-center justify-between",children:(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("div",{className:"w-4 h-4 flex items-center justify-center",children:(0,r.jsx)("i",{className:"ri-time-line text-yellow-500"})}),(0,r.jsxs)("span",{className:"text-gray-300",children:["Last contact: ",C(n.lastInteraction||n.createdAt)]})]})})]})}),(0,r.jsxs)("div",{className:"flex bg-gray-800 rounded-lg p-1 mb-6",children:[(0,r.jsx)("button",{onClick:()=>p("overview"),className:"flex-1 px-1 py-1 text-sm font-medium transition-colors cursor-pointer whitespace-nowrap rounded-full ".concat("overview"===h?"bg-blue-600 text-white":"text-gray-400 hover:text-white"),children:"Overview"}),(0,r.jsx)("button",{onClick:()=>p("timeline"),className:"flex-1 px-1 py-1 text-sm font-medium transition-colors cursor-pointer whitespace-nowrap rounded-full ".concat("timeline"===h?"bg-blue-600 text-white":"text-gray-400 hover:text-white"),children:"Timeline"}),(0,r.jsxs)("button",{onClick:()=>p("notes"),className:"flex-1 px-1 py-1 text-sm font-medium transition-colors cursor-pointer whitespace-nowrap rounded-full ".concat("notes"===h?"bg-blue-600 text-white":"text-gray-400 hover:text-white"),children:["Notes (",(null===(t=n.notes)||void 0===t?void 0:t.length)||0,")"]})]}),"overview"===h&&(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-700",children:[(0,r.jsxs)("h3",{className:"font-medium text-white mb-3 flex items-center space-x-2",children:[(0,r.jsx)("div",{className:"w-5 h-5 flex items-center justify-center",children:(0,r.jsx)("i",{className:"ri-heart-line text-red-500"})}),(0,r.jsx)("span",{children:"Client Preferences"}),(0,r.jsxs)("div",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat((e=>{switch(e){case"high":return"text-red-400 bg-red-900/30";case"medium":return"text-yellow-400 bg-yellow-900/30";case"low":return"text-green-400 bg-green-900/30";default:return"text-gray-400 bg-gray-900/30"}})(n.preferences.urgency)),children:[n.preferences.urgency.toUpperCase()," Priority"]})]}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("span",{className:"text-gray-400",children:"Budget Range"}),(0,r.jsxs)("span",{className:"text-white font-medium",children:["$",n.preferences.priceRange.min.toLocaleString()," - $",n.preferences.priceRange.max.toLocaleString()]})]}),(0,r.jsxs)("div",{className:"flex justify-between items-start",children:[(0,r.jsx)("span",{className:"text-gray-400",children:"Property Types"}),(0,r.jsx)("div",{className:"flex flex-wrap gap-1 max-w-48",children:n.preferences.propertyTypes.map((e,t)=>(0,r.jsx)("span",{className:"px-2 py-1 bg-blue-900/30 text-blue-300 rounded-full text-xs",children:e},t))})]}),(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("span",{className:"text-gray-400",children:"Bedrooms"}),(0,r.jsxs)("span",{className:"text-white",children:[n.preferences.bedrooms.min," - ",n.preferences.bedrooms.max]})]}),(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("span",{className:"text-gray-400",children:"Bathrooms"}),(0,r.jsxs)("span",{className:"text-white",children:[n.preferences.bathrooms.min," - ",n.preferences.bathrooms.max]})]}),n.preferences.preferredAreas.length>0&&(0,r.jsxs)("div",{className:"flex justify-between items-start",children:[(0,r.jsx)("span",{className:"text-gray-400",children:"Preferred Areas"}),(0,r.jsx)("div",{className:"flex flex-wrap gap-1 max-w-48",children:n.preferences.preferredAreas.map((e,t)=>(0,r.jsxs)("span",{className:"px-2 py-1 bg-green-900/30 text-green-300 rounded-full text-xs",children:["\uD83D\uDCCD ",e]},t))})]}),n.preferences.features.length>0&&(0,r.jsxs)("div",{className:"flex justify-between items-start",children:[(0,r.jsx)("span",{className:"text-gray-400",children:"Desired Features"}),(0,r.jsx)("div",{className:"flex flex-wrap gap-1 max-w-48",children:n.preferences.features.map((e,t)=>(0,r.jsx)("span",{className:"px-2 py-1 bg-purple-900/30 text-purple-300 rounded-full text-xs",children:e},t))})]})]})]}),n.tags.length>0&&(0,r.jsxs)("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-700",children:[(0,r.jsxs)("h3",{className:"font-medium text-white mb-3 flex items-center space-x-2",children:[(0,r.jsx)("div",{className:"w-5 h-5 flex items-center justify-center",children:(0,r.jsx)("i",{className:"ri-price-tag-line text-blue-500"})}),(0,r.jsx)("span",{children:"Tags"})]}),(0,r.jsx)("div",{className:"flex flex-wrap gap-2",children:n.tags.map((e,t)=>(0,r.jsx)("span",{className:"px-3 py-1 bg-blue-900/30 text-blue-300 rounded-full text-sm",children:e},t))})]}),(0,r.jsxs)("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-700",children:[(0,r.jsxs)("h3",{className:"font-medium text-white mb-3 flex items-center space-x-2",children:[(0,r.jsx)("div",{className:"w-5 h-5 flex items-center justify-center",children:(0,r.jsx)("i",{className:"ri-bar-chart-line text-green-500"})}),(0,r.jsx)("span",{children:"Activity Summary"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-3 gap-4 text-center",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-blue-400",children:n.totalInteractions}),(0,r.jsx)("div",{className:"text-xs text-gray-400",children:"Total Interactions"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-green-400",children:n.linkedRecordings.length}),(0,r.jsx)("div",{className:"text-xs text-gray-400",children:"Recordings"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-purple-400",children:(null===(s=n.notes)||void 0===s?void 0:s.length)||0}),(0,r.jsx)("div",{className:"text-xs text-gray-400",children:"Notes"})]})]})]})]}),"timeline"===h&&(0,r.jsx)(u,{client:n,recordings:j,loading:y}),"notes"===h&&(0,r.jsx)(g,{client:n,onAddNote:m})]}),(0,r.jsx)(o.Z,{})]})}var j=s(3486);function f(){let[e,t]=(0,a.useState)([]),[s,u]=(0,a.useState)([]),[h,g]=(0,a.useState)(null),[f,y]=(0,a.useState)(""),[b,v]=(0,a.useState)("all"),[N,w]=(0,a.useState)("recent"),[C,D]=(0,a.useState)(!1),[k,A]=(0,a.useState)([]),[S,L]=(0,a.useState)(!0),[E,I]=(0,a.useState)(0),[T,R]=(0,a.useState)(!1),{user:U}=(0,n.a)();(0,a.useEffect)(()=>{T||!U||S||R(!0)},[U,S,T]),(0,a.useEffect)(()=>{if(!(null==U?void 0:U.uid)){L(!0);return}console.log("\uD83D\uDD25 Loading clients for user:",U.uid);let e=(0,l.IO)((0,l.hJ)(i.db,"clients"),(0,l.ar)("userId","==",U.uid));return(0,l.cf)(e,e=>{console.log("\uD83D\uDCCA Found ".concat(e.docs.length," clients"));let s=e.docs.map(e=>({id:e.id,...e.data()}));s.sort((e,t)=>{var s,r;let a=(null===(s=e.createdAt)||void 0===s?void 0:s.toDate())||new Date(0);return((null===(r=t.createdAt)||void 0===r?void 0:r.toDate())||new Date(0)).getTime()-a.getTime()}),t(s),L(!1)},e=>{console.error("❌ Error loading clients:",e),L(!1)})},[U]),(0,a.useEffect)(()=>{if(!(null==U?void 0:U.uid))return;console.log("\uD83D\uDD14 Loading alerts for user:",U.uid);let e=(0,l.IO)((0,l.hJ)(i.db,"alerts"),(0,l.ar)("userId","==",U.uid));return(0,l.cf)(e,e=>{console.log("\uD83D\uDCE2 Found ".concat(e.docs.length," alerts"));let t=e.docs.map(e=>({id:e.id,...e.data()}));t.sort((e,t)=>{var s,r;let a=(null===(s=e.timestamp)||void 0===s?void 0:s.toDate())||new Date(0);return((null===(r=t.timestamp)||void 0===r?void 0:r.toDate())||new Date(0)).getTime()-a.getTime()}),A(t),I(t.filter(e=>!e.read).length)},e=>{console.error("❌ Error loading alerts:",e),A([]),I(0)})},[U]),(0,a.useEffect)(()=>{let t=e;if(f){let e=f.toLowerCase();t=t.filter(t=>{var s,r,a,l,i;return t.name.toLowerCase().includes(e)||(null===(s=t.email)||void 0===s?void 0:s.toLowerCase().includes(e))||t.tags.some(t=>t.toLowerCase().includes(e))||(null===(a=t.preferences)||void 0===a?void 0:null===(r=a.preferredAreas)||void 0===r?void 0:r.some(t=>t.toLowerCase().includes(e)))||(null===(i=t.preferences)||void 0===i?void 0:null===(l=i.propertyTypes)||void 0===l?void 0:l.some(t=>t.toLowerCase().includes(e)))})}switch("all"!==b&&(t=t.filter(e=>e.status===b)),N){case"name":t=t.sort((e,t)=>e.name.localeCompare(t.name));break;case"interactions":t=t.sort((e,t)=>(t.totalInteractions||0)-(e.totalInteractions||0));break;case"status":t=t.sort((e,t)=>{let s={"Hot Lead":3,Active:2,Cold:1};return s[t.status]-s[e.status]});break;default:t=t.sort((e,t)=>{var s,r,a,l;let i=(null===(s=e.lastInteraction)||void 0===s?void 0:s.toDate())||(null===(r=e.createdAt)||void 0===r?void 0:r.toDate())||new Date(0);return((null===(a=t.lastInteraction)||void 0===a?void 0:a.toDate())||(null===(l=t.createdAt)||void 0===l?void 0:l.toDate())||new Date(0)).getTime()-i.getTime()})}u(t)},[e,f,b,N]);let B=e=>{g(e)},F=async(e,t)=>{try{await (0,l.r7)((0,l.JU)(i.db,"clients",e),{status:t,updatedAt:(0,l.Bt)()}),console.log("✅ Client status updated")}catch(e){console.error("❌ Error updating client status:",e)}},H=async(t,s)=>{try{let r=e.find(e=>e.id===t);if(!r)return;let a={...s,id:"note_".concat(Date.now()),createdAt:(0,l.Bt)()};await (0,l.r7)((0,l.JU)(i.db,"clients",t),{notes:[...r.notes||[],a],updatedAt:(0,l.Bt)()}),console.log("✅ Client note added")}catch(e){console.error("❌ Error adding client note:",e)}},P=async e=>{try{await (0,l.r7)((0,l.JU)(i.db,"alerts",e),{read:!0,updatedAt:(0,l.Bt)()})}catch(e){console.error("❌ Error marking alert as read:",e)}},Z=t=>"all"===t?e.length:e.filter(e=>e.status===t).length;return h?(0,r.jsx)(c.Z,{children:(0,r.jsx)(p,{client:h,onBack:()=>{g(null)},onStatusUpdate:F,onAddNote:H})}):(0,r.jsx)(c.Z,{children:(0,r.jsxs)("div",{className:"min-h-screen bg-gray-900 pb-20",children:[(0,r.jsx)(d.Z,{}),(0,r.jsxs)("div",{className:"max-w-md mx-auto px-4 py-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-white mb-2",children:"Clients"}),(0,r.jsx)("p",{className:"text-gray-400",children:"Manage your client relationships"})]}),(0,r.jsxs)("button",{onClick:()=>D(!C),className:"relative w-10 h-10 bg-blue-600 hover:bg-blue-700 rounded-full flex items-center justify-center transition-colors cursor-pointer whitespace-nowrap",children:[(0,r.jsx)("div",{className:"w-5 h-5 flex items-center justify-center",children:(0,r.jsx)("i",{className:"ri-notification-line text-white text-xl"})}),E>0&&(0,r.jsx)("div",{className:"absolute -top-2 -right-2 w-5 h-5 bg-red-500 rounded-full flex items-center justify-center",children:(0,r.jsx)("span",{className:"text-white text-xs font-bold",children:E>9?"9+":E})})]})]}),C&&(0,r.jsx)(j.Z,{alerts:k,onClose:()=>D(!1),onMarkAsRead:P}),(0,r.jsx)(x,{searchTerm:f,onSearchChange:y,statusFilter:b,onStatusFilterChange:v,sortBy:N,onSortChange:w,statusCounts:{all:Z("all"),Active:Z("Active"),Cold:Z("Cold"),"Hot Lead":Z("Hot Lead")}}),S?(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center py-12",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mb-4"}),(0,r.jsx)("p",{className:"text-gray-400 text-sm",children:"Loading your clients..."})]}):U?0===s.length?(0,r.jsxs)("div",{className:"text-center py-12",children:[(0,r.jsx)("div",{className:"w-16 h-16 mx-auto mb-4 flex items-center justify-center",children:(0,r.jsx)("i",{className:"ri-user-line text-4xl text-gray-600"})}),(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-400 mb-2",children:f||"all"!==b?"No matching clients":"No clients yet"}),(0,r.jsx)("p",{className:"text-gray-500",children:f||"all"!==b?"Try adjusting your search or filters":"Your clients will appear here after recording sessions"})]}):(0,r.jsx)("div",{className:"space-y-4",children:s.map(e=>(0,r.jsx)(m,{client:e,onClick:()=>B(e),onStatusUpdate:F},e.id))}):(0,r.jsxs)("div",{className:"text-center py-12",children:[(0,r.jsx)("div",{className:"w-16 h-16 mx-auto mb-4 flex items-center justify-center",children:(0,r.jsx)("i",{className:"ri-user-line text-4xl text-gray-600"})}),(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-400 mb-2",children:"Authentication Required"}),(0,r.jsx)("p",{className:"text-gray-500",children:"Please log in to view your clients"})]})]}),(0,r.jsx)(o.Z,{})]})})}}},function(e){e.O(0,[358,139,826,527,971,117,744],function(){return e(e.s=2235)}),_N_E=e.O()}]);