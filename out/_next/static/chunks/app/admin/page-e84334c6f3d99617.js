(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3],{4597:function(e,s,t){Promise.resolve().then(t.bind(t,9725))},9725:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return m}});var r=t(7437),a=t(2265),i=t(5978),n=t(7293),l=t(6362),c=t(1904),d=t(813),o=t(7763),x=t(1344);function m(){var e;let[s,t]=(0,a.useState)("overview"),[m,g]=(0,a.useState)([]),[h,u]=(0,a.useState)([]),[p,b]=(0,a.useState)([]),[f,j]=(0,a.useState)(!0),[y,N]=(0,a.useState)(null),[v,w]=(0,a.useState)(null),{user:A}=(0,l.a)(),{flags:k,updateFlag:S,loading:E}=(0,c.gV)(),R=(null==A?void 0:null===(e=A.email)||void 0===e?void 0:e.includes("admin"))||!1;(0,a.useEffect)(()=>{if(!R)return;let e=[],s=(0,i.IO)((0,i.hJ)(n.db,"recordings"),(0,i.Xo)("createdAt","desc"),(0,i.b9)(50)),t=(0,i.cf)(s,e=>{g(e.docs.map(e=>({id:e.id,...e.data()})))});e.push(t);let r=(0,i.IO)((0,i.hJ)(n.db,"errorLogs"),(0,i.Xo)("timestamp","desc"),(0,i.b9)(100)),a=(0,i.cf)(r,e=>{u(e.docs.map(e=>({id:e.id,...e.data()})))});return e.push(a),j(!1),()=>{e.forEach(e=>e())}},[R]);let C=async e=>{if(e){w(e);try{console.log(" Rerunning AI analysis for recording: ".concat(e));let s=(0,i.JU)(n.db,"recordings",e);await (0,i.r7)(s,{status:"uploaded",rerunRequested:!0,rerunBy:null==A?void 0:A.email,rerunAt:new Date}),console.log(" Analysis rerun requested")}catch(e){console.error(" Error requesting rerun:",e),alert("Failed to rerun analysis")}finally{w(null)}}},I=async e=>{if(confirm("Are you sure you want to delete this recording? This action cannot be undone."))try{await (0,i.oe)((0,i.JU)(n.db,"recordings",e)),console.log(" Recording deleted")}catch(e){console.error(" Error deleting recording:",e),alert("Failed to delete recording")}},D=async e=>{try{await (0,i.r7)((0,i.JU)(n.db,"errorLogs",e),{resolved:!0,resolvedAt:new Date,resolvedBy:null==A?void 0:A.email})}catch(e){console.error(" Error resolving error:",e)}},F=e=>e?(e.toDate?e.toDate():new Date(e)).toLocaleString():"Unknown",O=e=>{switch(e){case"follow-up-ready":return"text-green-400 bg-green-900/30";case"transcribed":return"text-blue-400 bg-blue-900/30";case"uploaded":return"text-yellow-400 bg-yellow-900/30";case"error":return"text-red-400 bg-red-900/30";default:return"text-gray-400 bg-gray-900/30"}},M=e=>{switch(e){case"transcription":return"text-red-400 bg-red-900/30";case"ai-generation":return"text-orange-400 bg-orange-900/30";case"storage":return"text-yellow-400 bg-yellow-900/30";default:return"text-gray-400 bg-gray-900/30"}};return R?(0,r.jsx)(d.Z,{children:(0,r.jsxs)("div",{className:"min-h-screen bg-gray-900 pb-20",children:[(0,r.jsx)(o.Z,{}),(0,r.jsxs)("div",{className:"max-w-4xl mx-auto px-4 py-6",children:[(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,r.jsx)("div",{className:"w-6 h-6 flex items-center justify-center",children:(0,r.jsx)("i",{className:"ri-admin-line text-red-500 text-xl"})}),(0,r.jsx)("h1",{className:"text-2xl font-bold text-white",children:"Admin Console"}),(0,r.jsx)("span",{className:"px-2 py-1 bg-red-900/30 text-red-300 rounded-full text-xs",children:"Admin Only"})]}),(0,r.jsx)("p",{className:"text-gray-400",children:"System monitoring, QA tools, and feature management"})]}),(0,r.jsx)("div",{className:"flex space-x-2 mb-6 overflow-x-auto",children:[{id:"overview",label:"Overview",icon:"ri-dashboard-line"},{id:"recordings",label:"Recordings",icon:"ri-mic-line"},{id:"flags",label:"Feature Flags",icon:"ri-flag-line"},{id:"errors",label:"Error Logs",icon:"ri-error-warning-line"},{id:"users",label:"Users",icon:"ri-user-line"}].map(e=>(0,r.jsxs)("button",{onClick:()=>t(e.id),className:"flex items-center space-x-2 px-4 py-2 rounded-lg font-medium transition-colors cursor-pointer whitespace-nowrap ".concat(s===e.id?"bg-blue-600 text-white":"bg-gray-800 text-gray-400 hover:text-white hover:bg-gray-700"),children:[(0,r.jsx)("div",{className:"w-4 h-4 flex items-center justify-center",children:(0,r.jsx)("i",{className:e.icon})}),(0,r.jsx)("span",{children:e.label})]},e.id))}),"overview"===s&&(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,r.jsxs)("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-700",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,r.jsx)("div",{className:"w-4 h-4 flex items-center justify-center",children:(0,r.jsx)("i",{className:"ri-mic-line text-blue-500"})}),(0,r.jsx)("span",{className:"text-gray-400 text-sm",children:"Total Recordings"})]}),(0,r.jsx)("span",{className:"text-2xl font-bold text-white",children:m.length})]}),(0,r.jsxs)("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-700",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,r.jsx)("div",{className:"w-4 h-4 flex items-center justify-center",children:(0,r.jsx)("i",{className:"ri-error-warning-line text-red-500"})}),(0,r.jsx)("span",{className:"text-gray-400 text-sm",children:"Unresolved Errors"})]}),(0,r.jsx)("span",{className:"text-2xl font-bold text-white",children:h.filter(e=>!e.resolved).length})]}),(0,r.jsxs)("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-700",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,r.jsx)("div",{className:"w-4 h-4 flex items-center justify-center",children:(0,r.jsx)("i",{className:"ri-check-line text-green-500"})}),(0,r.jsx)("span",{className:"text-gray-400 text-sm",children:"Success Rate"})]}),(0,r.jsxs)("span",{className:"text-2xl font-bold text-white",children:[m.length>0?Math.round(m.filter(e=>"follow-up-ready"===e.status).length/m.length*100):0,"%"]})]}),(0,r.jsxs)("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-700",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,r.jsx)("div",{className:"w-4 h-4 flex items-center justify-center",children:(0,r.jsx)("i",{className:"ri-flag-line text-purple-500"})}),(0,r.jsx)("span",{className:"text-gray-400 text-sm",children:"Active Features"})]}),(0,r.jsx)("span",{className:"text-2xl font-bold text-white",children:Object.values(k).filter(Boolean).length})]})]}),(0,r.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6 border border-gray-700",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-white mb-4",children:"Recent Recordings"}),(0,r.jsx)("div",{className:"space-y-3",children:m.slice(0,5).map(e=>(0,r.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-900 rounded-lg",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"font-medium text-white",children:e.clientName}),(0,r.jsx)("p",{className:"text-sm text-gray-400",children:e.propertyAddress||"No address"})]}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(O(e.status)),children:e.status}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:F(e.createdAt)})]})]},e.id))})]})]}),"recordings"===s&&(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-white",children:"All Recordings"}),(0,r.jsxs)("div",{className:"text-sm text-gray-400",children:[m.length," total recordings"]})]}),(0,r.jsx)("div",{className:"space-y-3",children:m.map(e=>(0,r.jsxs)("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-700",children:[(0,r.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-medium text-white",children:e.clientName}),(0,r.jsx)("p",{className:"text-sm text-gray-400",children:e.propertyAddress||"No address"}),(0,r.jsxs)("p",{className:"text-xs text-gray-500",children:["ID: ",e.id]})]}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(O(e.status)),children:e.status}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:F(e.createdAt)})]})]}),e.errorMessage&&(0,r.jsx)("div",{className:"mb-3 p-2 bg-red-900/20 border border-red-700 rounded",children:(0,r.jsxs)("p",{className:"text-red-300 text-sm",children:["Error: ",e.errorMessage]})}),e.transcriptionMethod&&(0,r.jsxs)("div",{className:"mb-3 text-sm text-gray-400",children:["Transcription: ",e.transcriptionMethod]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("button",{onClick:()=>C(e.id),disabled:v===e.id,className:"px-3 py-1 bg-blue-600 hover:bg-blue-700 disabled:bg-blue-800 text-white rounded text-sm transition-colors cursor-pointer whitespace-nowrap flex items-center space-x-1",children:v===e.id?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-3 w-3 border-b border-white"}),(0,r.jsx)("span",{children:"Rerunning..."})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"w-3 h-3 flex items-center justify-center",children:(0,r.jsx)("i",{className:"ri-refresh-line"})}),(0,r.jsx)("span",{children:"Rerun AI"})]})}),(0,r.jsx)("button",{onClick:()=>N(e),className:"px-3 py-1 bg-gray-600 hover:bg-gray-500 text-white rounded text-sm transition-colors cursor-pointer whitespace-nowrap",children:"View Details"}),(0,r.jsx)("button",{onClick:()=>I(e.id),className:"px-3 py-1 bg-red-600 hover:bg-red-700 text-white rounded text-sm transition-colors cursor-pointer whitespace-nowrap",children:"Delete"})]})]},e.id))})]}),"flags"===s&&(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-white",children:"Feature Flags"}),(0,r.jsxs)("div",{className:"text-sm text-gray-400",children:[Object.values(k).filter(Boolean).length," / ",Object.keys(k).length," enabled"]})]}),(0,r.jsx)("div",{className:"grid gap-4",children:Object.entries(k).map(e=>{let[s,t]=e;return(0,r.jsx)("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-700",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-medium text-white capitalize",children:s.replace(/([A-Z])/g," $1").trim()}),(0,r.jsx)("p",{className:"text-sm text-gray-400",children:{autoTranscription:"Automatic audio transcription for recordings",sentimentAnalysis:"AI-powered sentiment analysis of conversations",speakerSeparation:"Identify different speakers in recordings",buyerPersonaGeneration:"Generate detailed buyer personas from conversations",aiFollowUps:"AI-generated follow-up messages",smartAlerts:"Intelligent property matching alerts",scheduledDelivery:"Schedule follow-up message delivery",voiceSummaries:"Text-to-speech summaries (Beta)",sessionEngagementReports:"Detailed engagement analytics per session",productivityDashboard:"Agent productivity tracking and metrics",clientObjectionsReport:"Analysis of common client objections",advancedAnalytics:"Enhanced analytics and reporting features",emailIntegration:"Direct email sending capabilities (Coming Soon)",crmSyncing:"CRM integration and data synchronization (Coming Soon)",agentLeaderboards:"Performance rankings and gamification (Coming Soon)",clientIntakeForms:"Pre-showing client preference forms (Coming Soon)",aiSmartSummaryPanel:"Unified AI insights dashboard (Coming Soon)",mobileOptimization:"Enhanced mobile experience",abTestingFramework:"A/B testing for AI prompts and features (Beta)",testRecordingSimulator:"Development tool for testing AI features",adminAuditTools:"Administrative monitoring and audit capabilities",debugMode:"Enhanced logging and debugging information",qaUtilities:"Quality assurance and testing utilities",enhancedErrorLogging:"Detailed error tracking and reporting",performanceMonitoring:"System performance tracking and optimization",userFeedbackCollection:"In-app feedback collection system",automaticQualityChecks:"Automated quality assurance checks"}[s]||"Feature configuration option"})]}),(0,r.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[(0,r.jsx)("input",{type:"checkbox",checked:t,onChange:e=>S(s,e.target.checked),disabled:E,className:"sr-only peer"}),(0,r.jsx)("div",{className:"w-11 h-6 bg-gray-700 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]})},s)})})]}),"errors"===s&&(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-white",children:"Error Logs"}),(0,r.jsxs)("div",{className:"text-sm text-gray-400",children:[h.filter(e=>!e.resolved).length," unresolved"]})]}),(0,r.jsxs)("div",{className:"space-y-3",children:[h.map(e=>(0,r.jsxs)("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-700",children:[(0,r.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(M(e.type)),children:e.type}),e.resolved&&(0,r.jsx)("span",{className:"ml-2 px-2 py-1 bg-green-900/30 text-green-300 rounded-full text-xs",children:"Resolved"})]}),(0,r.jsx)("p",{className:"text-xs text-gray-500",children:F(e.timestamp)})]}),(0,r.jsx)("p",{className:"text-white mb-2",children:e.message}),e.recordingId&&(0,r.jsxs)("p",{className:"text-sm text-gray-400 mb-2",children:["Recording: ",e.recordingId]}),!e.resolved&&(0,r.jsx)("button",{onClick:()=>D(e.id),className:"px-3 py-1 bg-green-600 hover:bg-green-700 text-white rounded text-sm transition-colors cursor-pointer whitespace-nowrap",children:"Mark Resolved"})]},e.id)),0===h.length&&(0,r.jsxs)("div",{className:"text-center py-8",children:[(0,r.jsx)("div",{className:"w-16 h-16 mx-auto mb-4 flex items-center justify-center",children:(0,r.jsx)("i",{className:"ri-check-double-line text-4xl text-green-500"})}),(0,r.jsx)("h3",{className:"text-lg font-medium text-white mb-2",children:"No Errors Found"}),(0,r.jsx)("p",{className:"text-gray-400",children:"System is running smoothly!"})]})]})]})]}),(0,r.jsx)(x.Z,{})]})}):(0,r.jsx)(d.Z,{children:(0,r.jsx)("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"w-16 h-16 mx-auto mb-4 flex items-center justify-center",children:(0,r.jsx)("i",{className:"ri-shield-line text-4xl text-red-500"})}),(0,r.jsx)("h1",{className:"text-2xl font-bold text-white mb-2",children:"Access Denied"}),(0,r.jsx)("p",{className:"text-gray-400",children:"You don't have permission to access the admin panel."})]})})})}}},function(e){e.O(0,[358,139,826,833,971,117,744],function(){return e(e.s=4597)}),_N_E=e.O()}]);